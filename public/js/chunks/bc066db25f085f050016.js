/*! For license information please see bc066db25f085f050016.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{120:function(t,e,i){const a=i(146),s=i(235),r=i(236),n=i(457);t.exports=class{constructor({metadataTypes:t=["icy"],...e}={}){const i=t.includes("icy"),o=t.includes("ogg");this._metadataParser=i&&o?new n(e):o?new r(e):i?new s(e):new a(e)}static parseIcyMetadata(t){return s.parseIcyMetadata(t)}get icyMetaInt(){return this._metadataParser.icyMetaInt}*iterator(t){yield*this._metadataParser.iterator(t)}readAll(t){this._metadataParser.readAll(t)}async*asyncIterator(t){return yield*this._metadataParser.asyncIterator(t)}async asyncReadAll(t){return this._metadataParser.asyncReadAll(t)}}},146:function(t,e,i){const a=i(234).TextDecoder||TextDecoder,s=i(456),r=()=>{};class n{constructor(t){this._remainingData=0,this._currentPosition=0,this._buffer=new Uint8Array(0),this._stats=new s,this._decoder=new a("utf-8"),this._onStream=t.onStream||r,this._onMetadata=t.onMetadata||r,this._onMetadataFailed=t.onMetadataFailed||r,this._onError=t.onError||r,this._enableLogging=t.enableLogging||!1,this._onStreamPromise=Promise.resolve(),this._onMetadataPromise=Promise.resolve(),this._generator=this._passThroughParser(),this._generator.next()}*_passThroughParser(){for(this._remainingData=1/0;;)yield*this._sendStream(yield*this._getNextValue())}static _concatBuffers(t,e){const i=new Uint8Array(t.length+e.length);return i.set(t),i.set(e,t.length),i}*iterator(t){for(let e=this._generator.next(t);e.value;e=this._generator.next())yield e.value}readAll(t){for(let e=this._generator.next(t);e.value;e=this._generator.next());}async*asyncIterator(t){for(let e=this._generator.next(t);e.value;e=this._generator.next())await this._onStreamPromise,await this._onMetadataPromise,yield e.value}async asyncReadAll(t){for(let e=this._generator.next(t);e.value;e=this._generator.next())await this._onStreamPromise,await this._onMetadataPromise}_logError(...t){this._enableLogging&&console.warn("icecast-metadata-js",t.reduce((t,e)=>t+"\n  "+e,"")),this._onError(...t)}*_sendStream(t){this._stats.addStreamBytes(t.length);const e={stream:t,stats:this._stats.stats};this._onStreamPromise=this._onStream(e),yield e}*_sendMetadata(t){const e={metadata:t,stats:this._stats.stats};this._onMetadataPromise=this._onMetadata(e),yield e}*_getNextValue(t=0){for(this._currentPosition===this._buffer.length&&(this._buffer=yield*this._readData(),this._currentPosition=0);this._buffer.length-this._currentPosition<t;)this._buffer=n._concatBuffers(this._buffer,yield*this._readData());const e=this._buffer.subarray(this._currentPosition,(t||this._remainingData)+this._currentPosition);return this._stats.addBytes(e.length),this._remainingData=e.length<this._remainingData?this._remainingData-e.length:0,this._currentPosition+=e.length,e}*_readData(){let t;do{t=yield}while(!t||0===t.length);return this._stats.addCurrentBytesRemaining(t.length),t}}t.exports=n},147:function(t,e,i){const a=i(148),s=i(238),r=i(239),n=i(459);t.exports=class{constructor({metadataTypes:t=["icy"],...e}={}){const i=t.includes("icy"),o=t.includes("ogg");this._metadataParser=i&&o?new n(e):o?new r(e):i?new s(e):new a(e)}static parseIcyMetadata(t){return s.parseIcyMetadata(t)}get icyMetaInt(){return this._metadataParser.icyMetaInt}*iterator(t){yield*this._metadataParser.iterator(t)}readAll(t){this._metadataParser.readAll(t)}async*asyncIterator(t){return yield*this._metadataParser.asyncIterator(t)}async asyncReadAll(t){return this._metadataParser.asyncReadAll(t)}}},148:function(t,e,i){const a=i(234).TextDecoder||TextDecoder,s=i(458),r=()=>{};class n{constructor(t){this._remainingData=0,this._currentPosition=0,this._buffer=new Uint8Array(0),this._stats=new s,this._decoder=new a("utf-8"),this._onStream=t.onStream||r,this._onMetadata=t.onMetadata||r,this._onMetadataFailed=t.onMetadataFailed||r,this._onError=t.onError||r,this._enableLogging=t.enableLogging||!1,this._onStreamPromise=Promise.resolve(),this._onMetadataPromise=Promise.resolve(),this._generator=this._passThroughParser(),this._generator.next()}*_passThroughParser(){for(this._remainingData=1/0;;)yield*this._sendStream(yield*this._getNextValue())}static _concatBuffers(t,e){const i=new Uint8Array(t.length+e.length);return i.set(t),i.set(e,t.length),i}*iterator(t){for(let e=this._generator.next(t);e.value;e=this._generator.next())yield e.value}readAll(t){for(let e=this._generator.next(t);e.value;e=this._generator.next());}async*asyncIterator(t){for(let e=this._generator.next(t);e.value;e=this._generator.next())await this._onStreamPromise,await this._onMetadataPromise,yield e.value}async asyncReadAll(t){for(let e=this._generator.next(t);e.value;e=this._generator.next())await this._onStreamPromise,await this._onMetadataPromise}_logError(...t){this._enableLogging&&console.warn("icecast-metadata-js",t.reduce((t,e)=>t+"\n  "+e,"")),this._onError(...t)}*_sendStream(t){this._stats.addStreamBytes(t.length);const e={stream:t,stats:this._stats.stats};this._onStreamPromise=this._onStream(e),yield e}*_sendMetadata(t){const e={metadata:t,stats:this._stats.stats};this._onMetadataPromise=this._onMetadata(e),yield e}*_getNextValue(t=0){for(this._currentPosition===this._buffer.length&&(this._buffer=yield*this._readData(),this._currentPosition=0);this._buffer.length-this._currentPosition<t;)this._buffer=n._concatBuffers(this._buffer,yield*this._readData());const e=this._buffer.subarray(this._currentPosition,(t||this._remainingData)+this._currentPosition);return this._stats.addBytes(e.length),this._remainingData=e.length<this._remainingData?this._remainingData-e.length:0,this._currentPosition+=e.length,e}*_readData(){let t;do{t=yield}while(!t||0===t.length);return this._stats.addCurrentBytesRemaining(t.length),t}}t.exports=n},233:function(t,e){const i=()=>{};t.exports=class{constructor({icyBr:t,onMetadataUpdate:e=i,onMetadataEnqueue:a=i}){this._icyBr=t,this._onMetadataUpdate=e,this._onMetadataEnqueue=a,this._isInitialMetadata=!0,this._metadataQueue=[]}get metadataQueue(){return this._metadataQueue.map(({_timeoutId:t,...e})=>e)}addMetadata({metadata:t,stats:e},i,a=0){this._enqueueMetadata(t,i,a+this.getTimeByBytes(e.currentStreamPosition))}getTimeByBytes(t){return this._icyBr?t/(125*this._icyBr):0}purgeMetadataQueue(){this._metadataQueue.forEach(t=>clearTimeout(t._timeoutId)),this._metadataQueue=[]}_enqueueMetadata(t,e,i){const a={metadata:t,timestampOffset:e,timestamp:i};this._metadataQueue.push(a),this._onMetadataEnqueue(t,e,i),this._isInitialMetadata?(this._dequeueMetadata(),this._isInitialMetadata=!1):a._timeoutId=setTimeout(()=>{this._dequeueMetadata()},1e3*(e-i))}_dequeueMetadata(){const{metadata:t,timestampOffset:e,timestamp:i}=this._metadataQueue.shift();this._onMetadataUpdate(t,e,i)}}},234:function(t,e,i){(function(t){var a=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),i={},a=0;a<e.length;a++)i[e[a]]=Object.getOwnPropertyDescriptor(t,e[a]);return i},s=/%[sdj%]/g;e.format=function(t){if(!f(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(o(arguments[i]));return e.join(" ")}i=1;for(var a=arguments,r=a.length,n=String(t).replace(s,(function(t){if("%%"===t)return"%";if(i>=r)return t;switch(t){case"%s":return String(a[i++]);case"%d":return Number(a[i++]);case"%j":try{return JSON.stringify(a[i++])}catch(t){return"[Circular]"}default:return t}})),l=a[i];i<r;l=a[++i])p(l)||!v(l)?n+=" "+l:n+=" "+o(l);return n},e.deprecate=function(i,a){if(void 0!==t&&!0===t.noDeprecation)return i;if(void 0===t)return function(){return e.deprecate(i,a).apply(this,arguments)};var s=!1;return function(){if(!s){if(t.throwDeprecation)throw new Error(a);t.traceDeprecation?console.trace(a):console.error(a),s=!0}return i.apply(this,arguments)}};var r,n={};function o(t,i){var a={seen:[],stylize:c};return arguments.length>=3&&(a.depth=arguments[2]),arguments.length>=4&&(a.colors=arguments[3]),g(i)?a.showHidden=i:i&&e._extend(a,i),y(a.showHidden)&&(a.showHidden=!1),y(a.depth)&&(a.depth=2),y(a.colors)&&(a.colors=!1),y(a.customInspect)&&(a.customInspect=!0),a.colors&&(a.stylize=l),h(a,t,a.depth)}function l(t,e){var i=o.styles[e];return i?"["+o.colors[i][0]+"m"+t+"["+o.colors[i][1]+"m":t}function c(t,e){return t}function h(t,i,a){if(t.customInspect&&i&&M(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var s=i.inspect(a,t);return f(s)||(s=h(t,s,a)),s}var r=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(f(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}if(_(e))return t.stylize(""+e,"number");if(g(e))return t.stylize(""+e,"boolean");if(p(e))return t.stylize("null","null")}(t,i);if(r)return r;var n=Object.keys(i),o=function(t){var e={};return t.forEach((function(t,i){e[t]=!0})),e}(n);if(t.showHidden&&(n=Object.getOwnPropertyNames(i)),w(i)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return d(i);if(0===n.length){if(M(i)){var l=i.name?": "+i.name:"";return t.stylize("[Function"+l+"]","special")}if(b(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(S(i))return t.stylize(Date.prototype.toString.call(i),"date");if(w(i))return d(i)}var c,v="",x=!1,B=["{","}"];(m(i)&&(x=!0,B=["[","]"]),M(i))&&(v=" [Function"+(i.name?": "+i.name:"")+"]");return b(i)&&(v=" "+RegExp.prototype.toString.call(i)),S(i)&&(v=" "+Date.prototype.toUTCString.call(i)),w(i)&&(v=" "+d(i)),0!==n.length||x&&0!=i.length?a<0?b(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),c=x?function(t,e,i,a,s){for(var r=[],n=0,o=e.length;n<o;++n)E(e,String(n))?r.push(u(t,e,i,a,String(n),!0)):r.push("");return s.forEach((function(s){s.match(/^\d+$/)||r.push(u(t,e,i,a,s,!0))})),r}(t,i,a,o,n):n.map((function(e){return u(t,i,a,o,e,x)})),t.seen.pop(),function(t,e,i){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1];return i[0]+e+" "+t.join(", ")+" "+i[1]}(c,v,B)):B[0]+v+B[1]}function d(t){return"["+Error.prototype.toString.call(t)+"]"}function u(t,e,i,a,s,r){var n,o,l;if((l=Object.getOwnPropertyDescriptor(e,s)||{value:e[s]}).get?o=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(o=t.stylize("[Setter]","special")),E(a,s)||(n="["+s+"]"),o||(t.seen.indexOf(l.value)<0?(o=p(i)?h(t,l.value,null):h(t,l.value,i-1)).indexOf("\n")>-1&&(o=r?o.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+o.split("\n").map((function(t){return"   "+t})).join("\n")):o=t.stylize("[Circular]","special")),y(n)){if(r&&s.match(/^\d+$/))return o;(n=JSON.stringify(""+s)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=t.stylize(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=t.stylize(n,"string"))}return n+": "+o}function m(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function p(t){return null===t}function _(t){return"number"==typeof t}function f(t){return"string"==typeof t}function y(t){return void 0===t}function b(t){return v(t)&&"[object RegExp]"===x(t)}function v(t){return"object"==typeof t&&null!==t}function S(t){return v(t)&&"[object Date]"===x(t)}function w(t){return v(t)&&("[object Error]"===x(t)||t instanceof Error)}function M(t){return"function"==typeof t}function x(t){return Object.prototype.toString.call(t)}function B(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(i){if(y(r)&&(r=t.env.NODE_DEBUG||""),i=i.toUpperCase(),!n[i])if(new RegExp("\\b"+i+"\\b","i").test(r)){var a=t.pid;n[i]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",i,a,t)}}else n[i]=function(){};return n[i]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=m,e.isBoolean=g,e.isNull=p,e.isNullOrUndefined=function(t){return null==t},e.isNumber=_,e.isString=f,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=y,e.isRegExp=b,e.isObject=v,e.isDate=S,e.isError=w,e.isFunction=M,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(454);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var t=new Date,e=[B(t.getHours()),B(t.getMinutes()),B(t.getSeconds())].join(":");return[t.getDate(),k[t.getMonth()],e].join(" ")}function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",C(),e.format.apply(e,arguments))},e.inherits=i(455),e._extend=function(t,e){if(!e||!v(e))return t;for(var i=Object.keys(e),a=i.length;a--;)t[i[a]]=e[i[a]];return t};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function I(t,e){if(!t){var i=new Error("Promise was rejected with a falsy value");i.reason=t,t=i}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(T&&t[T]){var e;if("function"!=typeof(e=t[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,i,a=new Promise((function(t,a){e=t,i=a})),s=[],r=0;r<arguments.length;r++)s.push(arguments[r]);s.push((function(t,a){t?i(t):e(a)}));try{t.apply(this,s)}catch(t){i(t)}return a}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),T&&Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,a(t))},e.promisify.custom=T,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function i(){for(var i=[],a=0;a<arguments.length;a++)i.push(arguments[a]);var s=i.pop();if("function"!=typeof s)throw new TypeError("The last argument must be of type Function");var r=this,n=function(){return s.apply(r,arguments)};e.apply(this,i).then((function(e){t.nextTick(n,null,e)}),(function(e){t.nextTick(I,e,n)}))}return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),Object.defineProperties(i,a(e)),i}}).call(this,i(140))},235:function(t,e,i){const a=i(146);class s extends a{constructor({icyMetaInt:t,icyDetectionTimeout:e=2e3,...i}){super(i),this._icyMetaInt=t,this._icyDetectionTimeout=e,this._generator=this._icyParser(),this._generator.next()}*_icyParser(){if(yield*this._hasIcyMetadata())for(;;)this._remainingData=this._icyMetaInt,yield*this._getStream(),yield*this._getMetadataLength(),this._remainingData&&(yield*this._getMetadata());this._remainingData=1/0,yield*this._getStream()}static parseIcyMetadata(t){const e=/(?<key>[^\0]+?)='(?<val>[^\0]*?)(;$|';|'$|$)/,i={};for(const a of t.match(new RegExp(e,"g"))||[]){const t=a.match(e);t&&(i[t.groups.key]=t.groups.val)}return i}get icyMetaInt(){return this._icyMetaInt}*_hasIcyMetadata(){if(this._icyMetaInt>0)return!0;if(!this._icyDetectionTimeout)return!1;this._logError("Passed in Icy-MetaInt is invalid. Attempting to detect ICY Metadata.","See https://github.com/eshaz/icecast-metadata-js for information on how to properly request ICY Metadata.");const t=[null,83,116,114,101,97,109,84,105,116,108,101,61],e=Date.now();let i=0;for(;e+this._icyDetectionTimeout>Date.now();){this._buffer=a._concatBuffers(this._buffer,yield*this._readData());t:for(;i<this._buffer.length-t.length;){for(let e=1;e<t.length;e++)if(this._buffer[e+i]!==t[e]){i++;continue t}return this._logError(`Found ICY Metadata! Setting Icy-MetaInt to ${i}.`),this._icyMetaInt=i,!0}}return this._logError("ICY Metadata not detected, but continuing anyway. Audio errors will occur if there is ICY metadata.",`Searched ${this._buffer.length} bytes for ${(Date.now()-e)/1e3} seconds.`,"Try increasing the `icyDetectionTimeout` value if ICY metadata is present in the stream."),this._onMetadataFailed("icy"),!1}*_getStream(){for(this._stats.currentStreamBytesRemaining=this._remainingData;this._remainingData;)yield*this._sendStream(yield*super._getNextValue())}*_getMetadataLength(){this._remainingData=1;do{this._remainingData=16*(yield*this._getNextValue())[0]}while(1===this._remainingData);this._stats.addMetadataLengthBytes(1)}*_getMetadata(){this._stats.currentMetadataBytesRemaining=this._remainingData;const t=yield*this._getNextValue(this._remainingData);this._stats.addMetadataBytes(t.length),yield*this._sendMetadata(s.parseIcyMetadata(this._decoder.decode(t)))}}t.exports=s},236:function(t,e,i){const a=i(146);t.exports=class extends a{constructor(t){super(t),this._generator=this._oggParser(),this._generator.next()}*_oggParser(){if(yield*this._hasOggPage()){const t=yield*this._identifyCodec();if(t)for(;yield*this._hasOggPage();)yield*this._getMetadata(t),yield*this._getStream()}this._remainingData=1/0,yield*this._getStream()}_getUint32(t,e=0){return new DataView(Uint8Array.from([...t.subarray(e,e+4)]).buffer).getUint32(0,!0)}_matchBytes(t,e){return String.fromCharCode(...e).match(t)}*_hasOggPage(){let t=[];for(;t.length<=65307;){const e=yield*super._getNextValue(5);if(79===e[0]&&103===e[1]&&103===e[2]&&83===e[3]&&!(248&e[5])){this._currentPosition-=5,this._remainingData+=5,this._stats._totalBytesRead-=5,this._stats._currentBytesRemaining+=5;break}t.push(e[0]),this._currentPosition-=4,this._stats._totalBytesRead-=4,this._stats._currentBytesRemaining+=4}if(t.length&&(yield*this._sendStream(Uint8Array.from(t))),t.length>65307)return this._logError("This stream is not an OGG stream. No OGG metadata will be returned.","See https://github.com/eshaz/icecast-metadata-js for information on OGG metadata."),this._onMetadataFailed("ogg"),!1;const e=yield*this._getNextValue(27),i=yield*this._getNextValue(e[26]);return this._remainingData=i.reduce((t,e)=>t+e,0),!0}*_identifyCodec(){const t=yield*this._getNextValue(8);return yield*this._getStream(),this._matchBytes(/\x7fFLAC/,t.subarray(0,5))?{regex:/^[\x84|\x04]/,length:4}:this._matchBytes(/OpusHead/,t.subarray(0,8))?{regex:/OpusTags/,length:8}:this._matchBytes(/\x01vorbis/,t.subarray(0,7))?{regex:/\x03vorbis/,length:7}:void 0}*_getMetadata({regex:t,length:e}){this._matchBytes(t,yield*this._getNextValue(e))&&(yield*this._sendMetadata(yield*this._readVorbisComment()))}*_getStream(){for(;this._remainingData;)yield*this._getNextValue()}*_getNextValue(t){const e=yield*super._getNextValue(t);return yield*this._sendStream(e),e}*_readData(){const t=yield*super._readData();return this._stats.currentStreamBytesRemaining=t.length,t}*_readVorbisComment(){const t=this._getUint32(yield*this._getNextValue(4));this._stats.addMetadataBytes(4);const e=this._decoder.decode(yield*this._getNextValue(t));this._stats.addMetadataBytes(t);const i=this._getUint32(yield*this._getNextValue(4));this._stats.addMetadataBytes(4);const a=[];for(let t=0;t<i;t++){const t=yield*this._getNextValue(4);this._stats.addMetadataBytes(4),a.push(yield*this._getNextValue(this._getUint32(t))),this._stats.addMetadataBytes(a[a.length-1].length)}return this._stats.currentMetadataBytesRemaining=0,a.reduce((t,e)=>{const i=e.indexOf(61),a=String.fromCharCode(...e.subarray(0,i)).toUpperCase(),s=this._decoder.decode(e.subarray(i+1));return t[a]=t[a]?`${t[a]}; ${s}`:s,t},{VENDOR_STRING:e})}}},237:function(t,e){const i=()=>{};t.exports=class{constructor({icyBr:t,onMetadataUpdate:e=i,onMetadataEnqueue:a=i}){this._icyBr=t,this._onMetadataUpdate=e,this._onMetadataEnqueue=a,this._isInitialMetadata=!0,this._metadataQueue=[]}get metadataQueue(){return this._metadataQueue.map(({_timeoutId:t,...e})=>e)}addMetadata({metadata:t,stats:e},i,a=0){this._enqueueMetadata(t,i,a+this.getTimeByBytes(e.currentStreamPosition))}getTimeByBytes(t){return this._icyBr?t/(125*this._icyBr):0}purgeMetadataQueue(){this._metadataQueue.forEach(t=>clearTimeout(t._timeoutId)),this._metadataQueue=[]}_enqueueMetadata(t,e,i){const a={metadata:t,timestampOffset:e,timestamp:i};this._metadataQueue.push(a),this._onMetadataEnqueue(t,e,i),this._isInitialMetadata?(this._dequeueMetadata(),this._isInitialMetadata=!1):a._timeoutId=setTimeout(()=>{this._dequeueMetadata()},1e3*(e-i))}_dequeueMetadata(){const{metadata:t,timestampOffset:e,timestamp:i}=this._metadataQueue.shift();this._onMetadataUpdate(t,e,i)}}},238:function(t,e,i){const a=i(148);class s extends a{constructor({icyMetaInt:t,icyDetectionTimeout:e=2e3,...i}){super(i),this._icyMetaInt=t,this._icyDetectionTimeout=e,this._generator=this._icyParser(),this._generator.next()}*_icyParser(){if(yield*this._hasIcyMetadata())for(;;)this._remainingData=this._icyMetaInt,yield*this._getStream(),yield*this._getMetadataLength(),this._remainingData&&(yield*this._getMetadata());this._remainingData=1/0,yield*this._getStream()}static parseIcyMetadata(t){const e=/(?<key>[^\0]+?)='(?<val>[^\0]*?)(;$|';|'$|$)/,i={};for(const a of t.match(new RegExp(e,"g"))||[]){const t=a.match(e);t&&(i[t.groups.key]=t.groups.val)}return i}get icyMetaInt(){return this._icyMetaInt}*_hasIcyMetadata(){if(this._icyMetaInt>0)return!0;if(!this._icyDetectionTimeout)return!1;this._logError("Passed in Icy-MetaInt is invalid. Attempting to detect ICY Metadata.","See https://github.com/eshaz/icecast-metadata-js for information on how to properly request ICY Metadata.");const t=[null,83,116,114,101,97,109,84,105,116,108,101,61],e=Date.now();let i=0;for(;e+this._icyDetectionTimeout>Date.now();){this._buffer=a._concatBuffers(this._buffer,yield*this._readData());t:for(;i<this._buffer.length-t.length;){for(let e=1;e<t.length;e++)if(this._buffer[e+i]!==t[e]){i++;continue t}return this._logError(`Found ICY Metadata! Setting Icy-MetaInt to ${i}.`),this._icyMetaInt=i,!0}}return this._logError("ICY Metadata not detected, but continuing anyway. Audio errors will occur if there is ICY metadata.",`Searched ${this._buffer.length} bytes for ${(Date.now()-e)/1e3} seconds.`,"Try increasing the `icyDetectionTimeout` value if ICY metadata is present in the stream."),this._onMetadataFailed("icy"),!1}*_getStream(){for(this._stats.currentStreamBytesRemaining=this._remainingData;this._remainingData;)yield*this._sendStream(yield*super._getNextValue())}*_getMetadataLength(){this._remainingData=1;do{this._remainingData=16*(yield*this._getNextValue())[0]}while(1===this._remainingData);this._stats.addMetadataLengthBytes(1)}*_getMetadata(){this._stats.currentMetadataBytesRemaining=this._remainingData;const t=yield*this._getNextValue(this._remainingData);this._stats.addMetadataBytes(t.length),yield*this._sendMetadata(s.parseIcyMetadata(this._decoder.decode(t)))}}t.exports=s},239:function(t,e,i){const a=i(148);t.exports=class extends a{constructor(t){super(t),this._generator=this._oggParser(),this._generator.next()}*_oggParser(){if(yield*this._hasOggPage()){const t=yield*this._identifyCodec();if(t)for(;yield*this._hasOggPage();)yield*this._getMetadata(t),yield*this._getStream()}this._remainingData=1/0,yield*this._getStream()}_getUint32(t,e=0){return new DataView(Uint8Array.from([...t.subarray(e,e+4)]).buffer).getUint32(0,!0)}_matchBytes(t,e){return String.fromCharCode(...e).match(t)}*_hasOggPage(){let t=[];for(;t.length<=65307;){const e=yield*super._getNextValue(5);if(79===e[0]&&103===e[1]&&103===e[2]&&83===e[3]&&!(248&e[5])){this._currentPosition-=5,this._remainingData+=5,this._stats._totalBytesRead-=5,this._stats._currentBytesRemaining+=5;break}t.push(e[0]),this._currentPosition-=4,this._stats._totalBytesRead-=4,this._stats._currentBytesRemaining+=4}if(t.length&&(yield*this._sendStream(Uint8Array.from(t))),t.length>65307)return this._logError("This stream is not an OGG stream. No OGG metadata will be returned.","See https://github.com/eshaz/icecast-metadata-js for information on OGG metadata."),this._onMetadataFailed("ogg"),!1;const e=yield*this._getNextValue(27),i=yield*this._getNextValue(e[26]);return this._remainingData=i.reduce((t,e)=>t+e,0),!0}*_identifyCodec(){const t=yield*this._getNextValue(8);return yield*this._getStream(),this._matchBytes(/\x7fFLAC/,t.subarray(0,5))?{regex:/^[\x84|\x04]/,length:4}:this._matchBytes(/OpusHead/,t.subarray(0,8))?{regex:/OpusTags/,length:8}:this._matchBytes(/\x01vorbis/,t.subarray(0,7))?{regex:/\x03vorbis/,length:7}:void 0}*_getMetadata({regex:t,length:e}){this._matchBytes(t,yield*this._getNextValue(e))&&(yield*this._sendMetadata(yield*this._readVorbisComment()))}*_getStream(){for(;this._remainingData;)yield*this._getNextValue()}*_getNextValue(t){const e=yield*super._getNextValue(t);return yield*this._sendStream(e),e}*_readData(){const t=yield*super._readData();return this._stats.currentStreamBytesRemaining=t.length,t}*_readVorbisComment(){const t=this._getUint32(yield*this._getNextValue(4));this._stats.addMetadataBytes(4);const e=this._decoder.decode(yield*this._getNextValue(t));this._stats.addMetadataBytes(t);const i=this._getUint32(yield*this._getNextValue(4));this._stats.addMetadataBytes(4);const a=[];for(let t=0;t<i;t++){const t=yield*this._getNextValue(4);this._stats.addMetadataBytes(4),a.push(yield*this._getNextValue(this._getUint32(t))),this._stats.addMetadataBytes(a[a.length-1].length)}return this._stats.currentMetadataBytesRemaining=0,a.reduce((t,e)=>{const i=e.indexOf(61),a=String.fromCharCode(...e.subarray(0,i)).toUpperCase(),s=this._decoder.decode(e.subarray(i+1));return t[a]=t[a]?`${t[a]}; ${s}`:s,t},{VENDOR_STRING:e})}}},240:function(t,e,i){const a=i(147),s=()=>{};class r{constructor(t,{icyMetaInt:e,onStream:i=s,...n}){let o;this._readableStream=new ReadableStream({async start(s){o=new a({...n,icyMetaInt:parseInt(t.headers.get("Icy-MetaInt"))||e,onStream:async t=>(s.enqueue(t.stream),i(t))});for await(const e of r.asyncIterator(t.body))await o.asyncReadAll(e);s.close()}}),this._icecast=o}get icyMetaInt(){return this._icecast.icyMetaInt}get readableStream(){return this._readableStream}async startReading(){try{for await(const t of r.asyncIterator(this._readableStream));}catch(t){if("AbortError"!==t.name)throw t}}static asyncIterator(t){const e=t.getReader();return{[Symbol.asyncIterator]:()=>({next:()=>e.read()})}}}t.exports=r},250:function(t,e,i){"use strict";i(287);var a=i(28),s=i(39),r=i(9),n=i(70),o=i(82),l=i(2),c=i(16);e.a=Object(r.a)(a.a,n.a).extend({name:"v-slider",directives:{ClickOutside:o.a},mixins:[n.a],props:{disabled:Boolean,inverseLabel:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:1},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:t=>"boolean"==typeof t||"always"===t},thumbSize:{type:[Number,String],default:32},tickLabels:{type:Array,default:()=>[]},ticks:{type:[Boolean,String],default:!1,validator:t=>"boolean"==typeof t||"always"===t},tickSize:{type:[Number,String],default:2},trackColor:String,trackFillColor:String,value:[Number,String],vertical:Boolean},data:()=>({app:null,oldValue:null,thumbPressed:!1,mouseTimeout:-1,isFocused:!1,isActive:!1,noClick:!1,startOffset:0}),computed:{classes(){return{...a.a.options.computed.classes.call(this),"v-input__slider":!0,"v-input__slider--vertical":this.vertical,"v-input__slider--inverse-label":this.inverseLabel}},internalValue:{get(){return this.lazyValue},set(t){t=isNaN(t)?this.minValue:t;const e=this.roundValue(Math.min(Math.max(t,this.minValue),this.maxValue));e!==this.lazyValue&&(this.lazyValue=e,this.$emit("input",e))}},trackTransition(){return this.thumbPressed?this.showTicks||this.stepNumeric?"0.1s cubic-bezier(0.25, 0.8, 0.5, 1)":"none":""},minValue(){return parseFloat(this.min)},maxValue(){return parseFloat(this.max)},stepNumeric(){return this.step>0?parseFloat(this.step):0},inputWidth(){const t=(this.roundValue(this.internalValue)-this.minValue)/(this.maxValue-this.minValue)*100;return isNaN(t)?0:t},trackFillStyles(){const t=this.vertical?"bottom":"left",e=this.vertical?"top":"right",i=this.vertical?"height":"width",a=this.$vuetify.rtl?"auto":"0",s=this.$vuetify.rtl?"0":"auto",r=this.isDisabled?`calc(${this.inputWidth}% - 10px)`:this.inputWidth+"%";return{transition:this.trackTransition,[t]:a,[e]:s,[i]:r}},trackStyles(){const t=this.vertical?this.$vuetify.rtl?"bottom":"top":this.$vuetify.rtl?"left":"right",e=this.vertical?"height":"width",i=this.isDisabled?`calc(${100-this.inputWidth}% - 10px)`:`calc(${100-this.inputWidth}%)`;return{transition:this.trackTransition,[t]:"0px",[e]:i}},showTicks(){return this.tickLabels.length>0||!(this.isDisabled||!this.stepNumeric||!this.ticks)},numTicks(){return Math.ceil((this.maxValue-this.minValue)/this.stepNumeric)},showThumbLabel(){return!(this.isDisabled||!this.thumbLabel&&!this.$scopedSlots["thumb-label"])},computedTrackColor(){if(!this.isDisabled)return this.trackColor?this.trackColor:this.isDark?this.validationState:this.validationState||"primary lighten-3"},computedTrackFillColor(){if(!this.isDisabled)return this.trackFillColor?this.trackFillColor:this.validationState||this.computedColor},computedThumbColor(){return this.thumbColor?this.thumbColor:this.validationState||this.computedColor}},watch:{min(t){const e=parseFloat(t);e>this.internalValue&&this.$emit("input",e)},max(t){const e=parseFloat(t);e<this.internalValue&&this.$emit("input",e)},value:{handler(t){this.internalValue=t}}},beforeMount(){this.internalValue=this.value},mounted(){this.app=document.querySelector("[data-app]")||Object(c.c)("Missing v-app or a non-body wrapping element with the [data-app] attribute",this)},methods:{genDefaultSlot(){const t=[this.genLabel()],e=this.genSlider();return this.inverseLabel?t.unshift(e):t.push(e),t.push(this.genProgress()),t},genSlider(){return this.$createElement("div",{class:{"v-slider":!0,"v-slider--horizontal":!this.vertical,"v-slider--vertical":this.vertical,"v-slider--focused":this.isFocused,"v-slider--active":this.isActive,"v-slider--disabled":this.isDisabled,"v-slider--readonly":this.isReadonly,...this.themeClasses},directives:[{name:"click-outside",value:this.onBlur}],on:{click:this.onSliderClick,mousedown:this.onSliderMouseDown,touchstart:this.onSliderMouseDown}},this.genChildren())},genChildren(){return[this.genInput(),this.genTrackContainer(),this.genSteps(),this.genThumbContainer(this.internalValue,this.inputWidth,this.isActive,this.isFocused,this.onFocus,this.onBlur)]},genInput(){return this.$createElement("input",{attrs:{value:this.internalValue,id:this.computedId,disabled:!0,readonly:!0,tabindex:-1,...this.$attrs}})},genTrackContainer(){const t=[this.$createElement("div",this.setBackgroundColor(this.computedTrackColor,{staticClass:"v-slider__track-background",style:this.trackStyles})),this.$createElement("div",this.setBackgroundColor(this.computedTrackFillColor,{staticClass:"v-slider__track-fill",style:this.trackFillStyles}))];return this.$createElement("div",{staticClass:"v-slider__track-container",ref:"track"},t)},genSteps(){if(!this.step||!this.showTicks)return null;const t=parseFloat(this.tickSize),e=Object(l.i)(this.numTicks+1),i=this.vertical?"bottom":this.$vuetify.rtl?"right":"left",a=this.vertical?this.$vuetify.rtl?"left":"right":"top";this.vertical&&e.reverse();const s=e.map(e=>{const s=[];this.tickLabels[e]&&s.push(this.$createElement("div",{staticClass:"v-slider__tick-label"},this.tickLabels[e]));const r=e*(100/this.numTicks),n=this.$vuetify.rtl?100-this.inputWidth<r:r<this.inputWidth;return this.$createElement("span",{key:e,staticClass:"v-slider__tick",class:{"v-slider__tick--filled":n},style:{width:t+"px",height:t+"px",[i]:`calc(${r}% - ${t/2}px)`,[a]:`calc(50% - ${t/2}px)`}},s)});return this.$createElement("div",{staticClass:"v-slider__ticks-container",class:{"v-slider__ticks-container--always-show":"always"===this.ticks||this.tickLabels.length>0}},s)},genThumbContainer(t,e,i,a,s,r,n="thumb"){const o=[this.genThumb()],l=this.genThumbLabelContent(t);return this.showThumbLabel&&o.push(this.genThumbLabel(l)),this.$createElement("div",this.setTextColor(this.computedThumbColor,{ref:n,key:n,staticClass:"v-slider__thumb-container",class:{"v-slider__thumb-container--active":i,"v-slider__thumb-container--focused":a,"v-slider__thumb-container--show-label":this.showThumbLabel},style:this.getThumbContainerStyles(e),attrs:{role:"slider",tabindex:this.isDisabled?-1:this.$attrs.tabindex?this.$attrs.tabindex:0,"aria-label":this.$attrs["aria-label"]||this.label,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":this.internalValue,"aria-readonly":String(this.isReadonly),"aria-orientation":this.vertical?"vertical":"horizontal"},on:{focus:s,blur:r,keydown:this.onKeyDown}}),o)},genThumbLabelContent(t){return this.$scopedSlots["thumb-label"]?this.$scopedSlots["thumb-label"]({value:t}):[this.$createElement("span",[String(t)])]},genThumbLabel(t){const e=Object(l.h)(this.thumbSize),i=this.vertical?`translateY(20%) translateY(${Number(this.thumbSize)/3-1}px) translateX(55%) rotate(135deg)`:"translateY(-20%) translateY(-12px) translateX(-50%) rotate(45deg)";return this.$createElement(s.e,{props:{origin:"bottom center"}},[this.$createElement("div",{staticClass:"v-slider__thumb-label-container",directives:[{name:"show",value:this.isFocused||this.isActive||"always"===this.thumbLabel}]},[this.$createElement("div",this.setBackgroundColor(this.computedThumbColor,{staticClass:"v-slider__thumb-label",style:{height:e,width:e,transform:i}}),[this.$createElement("div",t)])])])},genThumb(){return this.$createElement("div",this.setBackgroundColor(this.computedThumbColor,{staticClass:"v-slider__thumb"}))},getThumbContainerStyles(t){const e=this.vertical?"top":"left";let i=this.$vuetify.rtl?100-t:t;return i=this.vertical?100-i:i,{transition:this.trackTransition,[e]:i+"%"}},onSliderMouseDown(t){var e;if(t.preventDefault(),this.oldValue=this.internalValue,this.isActive=!0,null!=(e=t.target)&&e.matches(".v-slider__thumb-container, .v-slider__thumb-container *")){this.thumbPressed=!0;const e=t.target.getBoundingClientRect(),i="touches"in t?t.touches[0]:t;this.startOffset=this.vertical?i.clientY-(e.top+e.height/2):i.clientX-(e.left+e.width/2)}else this.startOffset=0,window.clearTimeout(this.mouseTimeout),this.mouseTimeout=window.setTimeout(()=>{this.thumbPressed=!0},300);const i=!l.D||{passive:!0,capture:!0},a=!!l.D&&{passive:!0},s="touches"in t;this.onMouseMove(t),this.app.addEventListener(s?"touchmove":"mousemove",this.onMouseMove,a),Object(l.a)(this.app,s?"touchend":"mouseup",this.onSliderMouseUp,i),this.$emit("start",this.internalValue)},onSliderMouseUp(t){t.stopPropagation(),window.clearTimeout(this.mouseTimeout),this.thumbPressed=!1;const e=!!l.D&&{passive:!0};this.app.removeEventListener("touchmove",this.onMouseMove,e),this.app.removeEventListener("mousemove",this.onMouseMove,e),this.$emit("mouseup",t),this.$emit("end",this.internalValue),Object(l.k)(this.oldValue,this.internalValue)||(this.$emit("change",this.internalValue),this.noClick=!0),this.isActive=!1},onMouseMove(t){"mousemove"===t.type&&(this.thumbPressed=!0),this.internalValue=this.parseMouseMove(t)},onKeyDown(t){if(!this.isInteractive)return;const e=this.parseKeyDown(t,this.internalValue);null==e||e<this.minValue||e>this.maxValue||(this.internalValue=e,this.$emit("change",e))},onSliderClick(t){if(this.noClick)return void(this.noClick=!1);this.$refs.thumb.focus(),this.onMouseMove(t),this.$emit("change",this.internalValue)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},parseMouseMove(t){const e=this.vertical?"top":"left",i=this.vertical?"height":"width",a=this.vertical?"clientY":"clientX",{[e]:s,[i]:r}=this.$refs.track.getBoundingClientRect(),n="touches"in t?t.touches[0][a]:t[a];let o=Math.min(Math.max((n-s-this.startOffset)/r,0),1)||0;return this.vertical&&(o=1-o),this.$vuetify.rtl&&(o=1-o),parseFloat(this.min)+o*(this.maxValue-this.minValue)},parseKeyDown(t,e){if(!this.isInteractive)return;const{pageup:i,pagedown:a,end:s,home:r,left:n,right:o,down:c,up:h}=l.z;if(![i,a,s,r,n,o,c,h].includes(t.keyCode))return;t.preventDefault();const d=this.stepNumeric||1,u=(this.maxValue-this.minValue)/d;if([n,o,c,h].includes(t.keyCode)){e+=((this.$vuetify.rtl?[n,h]:[o,h]).includes(t.keyCode)?1:-1)*d*(t.shiftKey?3:t.ctrlKey?2:1)}else if(t.keyCode===r)e=this.minValue;else if(t.keyCode===s)e=this.maxValue;else{e-=(t.keyCode===a?1:-1)*d*(u>100?u/10:10)}return e},roundValue(t){if(!this.stepNumeric)return t;const e=this.step.toString().trim(),i=e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0,a=this.minValue%this.stepNumeric,s=Math.round((t-a)/this.stepNumeric)*this.stepNumeric+a;return parseFloat(Math.min(s,this.maxValue).toFixed(i))}}})},266:function(t,e,i){"use strict";i.d(e,"a",(function(){return We}));const a=()=>{},s=new WeakMap,r="loading",n="playing",o="stopping",l="stopped",c="retrying",h="play",d="load",u="streamstart",m="stream",g="streamend",p="metadata",_="metadataenqueue",f="codecupdate",y="stop",b="retry",v="retrytimeout",S="warn",w="error",M=Symbol(),x=Symbol(),B=Symbol(),k=Symbol(),C=Symbol(),E=Symbol(),T=Symbol(),I=Symbol(),R=Symbol(),P=Symbol(),D=Symbol(),L=Symbol(),A=Symbol(),N=Symbol(),F=Symbol(),z=Symbol(),U=Symbol();var O=i(233),V=i.n(O),H=i(120),$=i.n(H);const j=()=>{};class q{constructor(t,{icyMetaInt:e,onStream:i=j,...a}){let s;this._readableStream=new ReadableStream({async start(r){s=new $.a({...a,icyMetaInt:parseInt(t.headers.get("Icy-MetaInt"))||e,onStream:async t=>(r.enqueue(t.stream),i(t))});for await(const e of q.asyncIterator(t.body))await s.asyncReadAll(e);r.close()}}),this._icecast=s}get icyMetaInt(){return this._icecast.icyMetaInt}get readableStream(){return this._readableStream}async startReading(){try{for await(const t of q.asyncIterator(this._readableStream));}catch(t){if("AbortError"!==t.name)throw t}}static asyncIterator(t){const e=t.getReader();return{[Symbol.asyncIterator]:()=>({next:()=>e.read()})}}}class G{constructor(){this._listeners=[]}hasEventListener(t,e){return this._listeners.some(i=>i.type===t&&i.listener===e)}addEventListener(t,e,i={}){return this.hasEventListener(t,e)||this._listeners.push({type:t,listener:e,options:i}),this}removeEventListener(t,e){const i=this._listeners.findIndex(i=>i.type===t&&i.listener===e);return i>=0&&this._listeners.splice(i,1),this}removeEventListeners(){return this._listeners=[],this}dispatchEvent(t){return this._listeners.filter(e=>e.type===t.type).forEach(e=>{const{type:i,listener:a,options:{once:s}}=e;a.call(this,t),!0===s&&this.removeEventListener(i,a)}),this}}class W{constructor(t){const e=s.get(t);this._icecast=t,this._audioElement=e[B],this._endpoint=e[M],this._metadataTypes=e[x],this._icyMetaInt=e[k],this._icyDetectionTimeout=e[C],this._hasIcy=e[F],this._icecastMetadataQueue=e[z]}get icyMetaInt(){return this._icecastReadableStream&&this._icecastReadableStream.icyMetaInt}async play(){return this.fetchStream().then(async t=>(this._icecast[D](u),this.playResponse(t).finally(()=>{this._icecast[D](g)})))}async fetchStream(){const t=await fetch(this._endpoint,{method:"GET",headers:this._hasIcy?{"Icy-MetaData":1}:{},signal:s.get(this._icecast)[U].signal});if(!t.ok){const e=new Error(`${t.status} received from ${t.url}`);throw e.name="HTTP Response Error",e}return t}async playResponse(t){this._icecastReadableStream=new q(t,{onMetadata:this.getOnMetadata(),onStream:this.getOnStream(t),onError:(...t)=>this._icecast[D](S,...t),metadataTypes:this._metadataTypes,icyMetaInt:this._icyMetaInt,icyDetectionTimeout:this._icyDetectionTimeout}),await this._icecastReadableStream.startReading()}getOnMetadata(){return t=>{this._icecastMetadataQueue.addMetadata(t,this.metadataTimestamp,this._audioElement.currentTime)}}}const Y=(...t)=>{console.error("codec-parser",t.reduce((t,e)=>t+"\n  "+e,""))},K=new Int32Array([0,7,14,9,28,27,18,21,56,63,54,49,36,35,42,45,112,119,126,121,108,107,98,101,72,79,70,65,84,83,90,93,224,231,238,233,252,251,242,245,216,223,214,209,196,195,202,205,144,151,158,153,140,139,130,133,168,175,166,161,180,179,186,189,199,192,201,206,219,220,213,210,255,248,241,246,227,228,237,234,183,176,185,190,171,172,165,162,143,136,129,134,147,148,157,154,39,32,41,46,59,60,53,50,31,24,17,22,3,4,13,10,87,80,89,94,75,76,69,66,111,104,97,102,115,116,125,122,137,142,135,128,149,146,155,156,177,182,191,184,173,170,163,164,249,254,247,240,229,226,235,236,193,198,207,200,221,218,211,212,105,110,103,96,117,114,123,124,81,86,95,88,77,74,67,68,25,30,23,16,5,2,11,12,33,38,47,40,61,58,51,52,78,73,64,71,82,85,92,91,118,113,120,127,106,109,100,99,62,57,48,55,34,37,44,43,6,1,8,15,26,29,20,19,174,169,160,167,178,181,188,187,150,145,152,159,138,141,132,131,222,217,208,215,194,197,204,203,230,225,232,239,250,253,244,243]),Q=[0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15],X=t=>Q[15&t]<<4|Q[t>>4];class J{constructor(t){this._data=t,this._pos=8*t.length}set position(t){this._pos=t}get position(){return this._pos}read(t){const e=Math.floor(this._pos/8),i=this._pos%8;this._pos-=t;return(X(this._data[e-1])<<8)+X(this._data[e])>>7-i&255}}const Z=new WeakMap,tt=new WeakMap,et=new WeakMap;class it{constructor(t){this._onCodecUpdate=t,this.reset()}static getKey(t){return String.fromCharCode(...t)}enable(){this._isEnabled=!0}reset(){this._headerCache=new Map,this._codecUpdateData=new WeakMap,this._isEnabled=!1}getHeader(t){const e=this._headerCache.get(t);return e&&t!==this._currentHeader&&(this._currentHeader=t,this._onCodecUpdate({...this._codecUpdateData.get(e)})),e}setHeader(t,e,i){this._isEnabled&&(t!==this._currentHeader&&(this._currentHeader=t,this._onCodecUpdate({...i})),this._headerCache.set(t,e),this._codecUpdateData.set(e,i))}}class at{constructor(t){this._headerCache=new it(t)}syncFrame(t,e=0){let i=new this.Frame(t.subarray(e),this._headerCache);for(;!i.header&&e+this._maxHeaderLength<t.length;)e+=et.get(i).length||1,i=new this.Frame(t.subarray(e),this._headerCache);return{frame:i,remainingData:e}}fixedLengthFrame(t){return this.fixedLengthFrameSync(t,!1)}fixedLengthFrameSync(t,e=!0){let{frame:i,remainingData:a}=this.syncFrame(t),s=[];for(;Z.get(i.header)&&et.get(i).length+a+this._maxHeaderLength<t.length;){const r=new this.Frame(t.subarray(et.get(i).length+a),this._headerCache);if(r.header||!e){if(this._headerCache.enable(),s.push(i),a+=et.get(i).length,i=r,!Z.get(i.header))break}else{this._headerCache.reset(),a++;const e=this.syncFrame(t,a);a+=e.remainingData,i=e.frame}}return{frames:s,remainingData:a}}}class st{constructor(t,e,i){this.data=e||[],this.header=t,this.samples=i,this.duration=t&&i&&this.samples/this.header.sampleRate*1e3,this.frameNumber=void 0,this.totalBytesOut=void 0,this.totalSamples=void 0,this.totalDuration=void 0,et.set(this,{length:this.data.length})}}class rt{constructor(t,e){tt.set(this,t),Z.set(this,e),this.bitDepth=t.bitDepth,this.channels=t.channels,this.sampleRate=t.sampleRate}}const nt={0:["free","free","free","free","free"],16:[32,32,32,32,8],32:[64,48,40,48,16],48:[96,56,48,56,24],64:[128,64,56,64,32],80:[160,80,64,80,40],96:[192,96,80,96,48],112:[224,112,96,112,56],128:[256,128,112,128,64],144:[288,160,128,144,80],160:[320,192,160,160,96],176:[352,224,192,176,112],192:[384,256,224,192,128],208:[416,320,256,224,144],224:[448,384,320,256,160],240:["bad","bad","bad","bad","bad"]},ot={0:"bands 4 to 31",16:"bands 8 to 31",32:"bands 12 to 31",48:"bands 16 to 31"},lt={0:{description:"reserved"},2:{description:"Layer III",framePadding:1,modeExtensions:{0:"Intensity stereo off, MS stereo off",16:"Intensity stereo on, MS stereo off",32:"Intensity stereo off, MS stereo on",48:"Intensity stereo on, MS stereo on"},v1:{bitrateIndex:2,samples:1152},v2:{bitrateIndex:4,samples:576}},4:{description:"Layer II",framePadding:1,modeExtensions:ot,samples:1152,v1:{bitrateIndex:1},v2:{bitrateIndex:4}},6:{description:"Layer I",framePadding:4,modeExtensions:ot,samples:384,v1:{bitrateIndex:0},v2:{bitrateIndex:3}}},ct={0:{description:"MPEG Version 2.5 (later extension of MPEG 2)",layers:"v2",sampleRates:{0:11025,4:12e3,8:8e3,12:"reserved"}},8:{description:"reserved"},16:{description:"MPEG Version 2 (ISO/IEC 13818-3)",layers:"v2",sampleRates:{0:22050,4:24e3,8:16e3,12:"reserved"}},24:{description:"MPEG Version 1 (ISO/IEC 11172-3)",layers:"v1",sampleRates:{0:44100,4:48e3,8:32e3,12:"reserved"}}},ht={0:"16bit CRC",1:"none"},dt={0:"none",1:"50/15 ms",2:"reserved",3:"CCIT J.17"},ut={0:{channels:2,description:"Stereo"},64:{channels:2,description:"Joint stereo"},128:{channels:2,description:"Dual channel"},192:{channels:1,description:"Single channel (Mono)"}};class mt extends rt{static getHeader(t,e){const i={};if(t.length<4)return new mt(i,!1);const a=it.getKey(t.subarray(0,4)),s=e.getHeader(a);if(s)return new mt(s,!0);if(255!==t[0]||t[1]<224)return null;const r=24&t[1],n=6&t[1],o=1&t[1];i.length=4;const l=ct[r];if("reserved"===l.description)return null;if("reserved"===lt[n].description)return null;const c={...lt[n],...lt[n][l.layers]};i.mpegVersion=l.description,i.layer=c.description,i.samples=c.samples,i.protection=ht[o];const h=240&t[2],d=12&t[2],u=2&t[2],m=1&t[2];if(i.bitrate=nt[h][c.bitrateIndex],"bad"===i.bitrate)return null;if(i.sampleRate=l.sampleRates[d],"reserved"===i.sampleRate)return null;if(i.framePadding=u>>1&&c.framePadding,i.isPrivate=!!m,i.frameLength=Math.floor(125*i.bitrate*i.samples/i.sampleRate+i.framePadding),!i.frameLength)return null;const g=192&t[3],p=48&t[3],_=8&t[3],f=4&t[3],y=3&t[3];if(i.channelMode=ut[g].description,i.channels=ut[g].channels,i.modeExtension=c.modeExtensions[p],i.isCopyrighted=!!(_>>3),i.isOriginal=!!(f>>2),i.emphasis=dt[y],"reserved"===i.emphasis)return null;i.bitDepth=16;const{length:b,frameLength:v,samples:S,...w}=i;return e.setHeader(a,i,w),new mt(i,!0)}constructor(t,e){super(t,e),this.bitrate=t.bitrate,this.channelMode=t.channelMode,this.emphasis=t.emphasis,this.framePadding=t.framePadding,this.isCopyrighted=t.isCopyrighted,this.isOriginal=t.isOriginal,this.isPrivate=t.isPrivate,this.layer=t.layer,this.modeExtension=t.modeExtension,this.mpegVersion=t.mpegVersion,this.protection=t.protection}}class gt extends st{constructor(t,e){const i=mt.getHeader(t,e);super(i,i&&t.subarray(0,tt.get(i).frameLength),i&&tt.get(i).samples)}}class pt extends at{constructor(t,e){super(t),this.Frame=gt,this._maxHeaderLength=4,e(this.codec)}get codec(){return"mpeg"}parseFrames(t){return this.fixedLengthFrameSync(t)}}const _t={0:"MPEG-4",8:"MPEG-2"},ft={0:"valid",2:"bad",4:"bad",6:"bad"},yt={0:"16bit CRC",1:"none"},bt={0:"AAC Main",64:"AAC LC (Low Complexity)",128:"AAC SSR (Scalable Sample Rate)",192:"AAC LTP (Long Term Prediction)"},vt={0:96e3,4:88200,8:64e3,12:48e3,16:44100,20:32e3,24:24e3,28:22050,32:16e3,36:12e3,40:11025,44:8e3,48:7350,52:"reserved",56:"reserved",60:"frequency is written explicitly"},St={0:{channels:0,description:"Defined in AOT Specific Config"},64:{channels:1,description:"front-center"},128:{channels:2,description:"front-left, front-right"},192:{channels:3,description:"front-center, front-left, front-right"},256:{channels:4,description:"front-center, front-left, front-right, back-center"},320:{channels:5,description:"front-center, front-left, front-right, back-left, back-right"},384:{channels:6,description:"front-center, front-left, front-right, back-left, back-right, LFE-channel"},448:{channels:8,description:"front-center, front-left, front-right, side-left, side-right, back-left, back-right, LFE-channel"}};class wt extends rt{static getHeader(t,e){const i={};if(t.length<7)return new wt(i,!1);const a=it.getKey([t[0],t[1],t[2],111111100&t[3]]),s=e.getHeader(a);if(s)Object.assign(i,s);else{if(255!==t[0]||t[1]<240)return null;const e=8&t[1],a=6&t[1],s=1&t[1];if(i.mpegVersion=_t[e],i.layer=ft[a],"bad"===i.layer)return null;i.protection=yt[s],i.length=s?7:9,i.profileBits=192&t[2],i.sampleRateBits=60&t[2];const r=2&t[2];if(i.profile=bt[i.profileBits],i.sampleRate=vt[i.sampleRateBits],"reserved"===i.sampleRate)return null;i.isPrivate=!!(r>>1),i.channelModeBits=448&new DataView(Uint8Array.of(t[2],t[3]).buffer).getUint16(),i.channelMode=St[i.channelModeBits].description,i.channels=St[i.channelModeBits].channels;const n=32&t[3],o=8&t[3],l=8&t[3],c=4&t[3];i.isOriginal=!!(n>>5),i.isHome=!!(o>>4),i.copyrightId=!!(l>>3),i.copyrightIdStart=!!(c>>2),i.bitDepth=16}const r=262112&new DataView(Uint8Array.of(0,t[3],t[4],t[5]).buffer).getUint32();if(i.frameLength=r>>5,!i.frameLength)return null;const n=8188&new DataView(Uint8Array.of(t[5],t[6]).buffer).getUint16();if(i.bufferFullness=8188===n?"VBR":n>>2,i.numberAACFrames=3&t[6],i.samples=1024,!s){const{length:t,channelModeBits:s,profileBits:r,sampleRateBits:n,frameLength:o,bufferFullness:l,numberAACFrames:c,samples:h,...d}=i;e.setHeader(a,i,d)}return new wt(i,!0)}constructor(t,e){super(t,e),this.copyrightId=t.copyrightId,this.copyrightIdStart=t.copyrightIdStart,this.channelMode=t.channelMode,this.bufferFullness=t.bufferFullness,this.isHome=t.isHome,this.isOriginal=t.isOriginal,this.isPrivate=t.isPrivate,this.layer=t.layer,this.mpegVersion=t.mpegVersion,this.numberAACFrames=t.numberAACFrames,this.profile=t.profile,this.protection=t.protection}get audioSpecificConfig(){const t=tt.get(this),e=t.profileBits+64<<5|t.sampleRateBits<<5|t.channelModeBits>>3,i=new Uint8Array(2);return new DataView(i.buffer).setUint16(0,e,!1),i}}class Mt extends st{constructor(t,e){const i=wt.getHeader(t,e);super(i,i&&t.subarray(tt.get(i).length,tt.get(i).frameLength),i&&tt.get(i).samples),et.get(this).length=i&&tt.get(i).frameLength}}class xt extends at{constructor(t,e){super(t),this.Frame=Mt,this._maxHeaderLength=9,e(this.codec)}get codec(){return"aac"}parseFrames(t){return this.fixedLengthFrameSync(t)}}class Bt{static getHeader(t){const e={};if(t.length<28)return new Bt(e,!1);const i=new DataView(Uint8Array.of(...t.subarray(0,28)).buffer);if(1332176723!==i.getUint32(0))return null;e.streamStructureVersion=t[4];const a=248&t[5],s=4&t[5],r=2&t[5],n=1&t[5];if(a)return null;e.isContinuedPacket=!!(s>>2),e.isFirstPage=!!(r>>1),e.isLastPage=!!n;try{e.absoluteGranulePosition=i.getBigInt64(6,!0)}catch{}e.streamSerialNumber=i.getInt32(14,!0),e.pageSequenceNumber=i.getInt32(18,!0),e.pageChecksum=i.getInt32(22,!0);const o=t[26];if(e.length=o+27,e.length>t.length)return new Bt(e,!1);e.frameLength=0,e.pageSegmentTable=[],e.pageSegmentBytes=t.subarray(27,e.length);let l=0;for(const t of e.pageSegmentBytes)e.frameLength+=t,l+=t,255!==t&&(e.pageSegmentTable.push(l),l=0);return new Bt(e,!0)}constructor(t,e){tt.set(this,t),Z.set(this,e),this.absoluteGranulePosition=t.absoluteGranulePosition,this.isContinuedPacket=t.isContinuedPacket,this.isFirstPage=t.isFirstPage,this.isLastPage=t.isLastPage,this.pageSegmentTable=t.pageSegmentTable,this.pageSequenceNumber=t.pageSequenceNumber,this.pageChecksum=t.pageChecksum,this.streamSerialNumber=t.streamSerialNumber}}class kt extends st{constructor(t){const e=Bt.getHeader(t),i=tt.get(e);if(super(e,e?t.subarray(i.length,i.length+i.frameLength):[]),Z.get(e)){let a=i.length;this.segments=e.pageSegmentTable.map(e=>{const i=t.subarray(a,a+e);return a+=e,i}),this.length=i.length+i.frameLength}}}const Ct={0:"Fixed",1:"Variable"},Et={0:"reserved",16:192,32:576,48:1152,64:2304,80:4608,96:"8-bit (blocksize-1) end of header",112:"16-bit (blocksize-1) end of header",128:256,144:512,160:1024,176:2048,192:4096,208:8192,224:16384,240:32768},Tt={0:"invalid",1:88200,2:176400,3:192e3,4:8e3,5:16e3,6:22050,7:24e3,8:32e3,9:44100,10:48e3,11:96e3,12:"get 8 bit sample rate (in kHz) from end of header",13:"get 16 bit sample rate (in Hz) from end of header",14:"get 16 bit sample rate (in tens of Hz) from end of header",15:"invalid"},It={0:{channels:1,description:"mono"},16:{channels:2,description:"left, right"},32:{channels:3,description:"left, right, center"},48:{channels:4,description:"front left, front right, back left, back right"},64:{channels:5,description:"front left, front right, front center, back/surround left, back/surround right"},80:{channels:6,description:"front left, front right, front center, LFE, back/surround left, back/surround right"},96:{channels:7,description:"front left, front right, front center, LFE, back center, side left, side right"},112:{channels:8,description:"front left, front right, front center, LFE, back left, back right, side left, side right"},128:{channels:2,description:"left/side stereo: channel 0 is the left channel, channel 1 is the side(difference) channel"},144:{channels:2,description:"right/side stereo: channel 0 is the side(difference) channel, channel 1 is the right channel"},160:{channels:2,description:"mid/side stereo: channel 0 is the mid(average) channel, channel 1 is the side(difference) channel"},176:"reserved",192:"reserved",208:"reserved",224:"reserved",240:"reserved"},Rt={0:"get from STREAMINFO metadata block",2:8,4:12,6:"reserved",8:16,10:20,12:24,14:"reserved"};class Pt extends rt{static decodeUTF8Int(t){if(t[0]<128)return{value:t[0],next:1};if(255===t)return null;let e,i=2,a=224;for(;(t[0]&a)!=(a<<1&255)&&i<7;)i++,a|=a>>1;if(7===i)return null;const s=6*(i-1);e=t[0]&(255^a)<<s;for(let a=1;a<i;a++)e|=(63&t[a])<<s-6*a;return{value:e,next:i}}static getHeader(t,e){const i={};if(t.length<6)return new Pt(i,!1);const a=it.getKey(t.subarray(0,4)),s=e.getHeader(a);if(s)Object.assign(i,s);else{if(255!==t[0]||248!==t[1]&&249!==t[1])return null;i.length=2,i.blockingStrategyBits=1&t[1],i.blockingStrategy=Ct[i.blockingStrategyBits],i.length++;const e=240&t[2],a=15&t[2];if(i.blockSize=Et[e],"reserved"===i.blockSize)return null;if(i.sampleRate=Tt[a],"invalid"===i.sampleRate)return null;if(i.length++,1&t[3])return null;const s=240&t[3],r=14&t[3],n=It[s];if("reserved"===n)return null;if(i.channels=n.channels,i.channelMode=n.description,i.bitDepth=Rt[r],"reserved"===i.bitDepth)return null}if(i.length=5,t.length<i.length+8)return new Pt(i,!1);const r=Pt.decodeUTF8Int(t.subarray(4));if(!r)return null;if(i.blockingStrategyBits?i.sampleNumber=r.value:i.frameNumber=r.value,i.length+=r.next,"string"==typeof i.blockSize)if(96===blockSizeBits){if(t.length<i.length)return new Pt(i,!1);i.blockSize=t[i.length-1]-1,i.length+=1}else if(112===blockSizeBits){if(t.length<=i.length)return new Pt(i,!1);i.blockSize=(t[i.length-1]<<8)+t[i.length]-1,i.length+=2}if(i.samples=i.blockSize,"string"==typeof i.sampleRate)if(12===sampleRateBits){if(t.length<i.length)return new Pt(i,!1);i.sampleRate=t[i.length-1]-1,i.length+=1}else if(13===sampleRateBits){if(t.length<=i.length)return new Pt(i,!1);i.sampleRate=(t[i.length-1]<<8)+t[i.length]-1,i.length+=2}else if(14===sampleRateBits){if(t.length<=i.length)return new Pt(i,!1);i.sampleRate=(t[i.length-1]<<8)+t[i.length]-1,i.length+=2}if(t.length<i.length)return new Pt(i,!1);if(i.crc=t[i.length-1],i.crc!==(t=>{let e;for(const i of t)e=255&K[255&(e^i)];return e})(t.subarray(0,i.length-1)))return null;if(!s){const{blockingStrategyBits:t,frameNumber:s,sampleNumber:r,samples:n,crc:o,length:l,...c}=i;e.setHeader(a,i,c)}return i}constructor(t,e){super(t,e),this.channelMode=t.channelMode,this.blockingStrategy=t.blockingStrategy,this.blockSize=t.blockSize,this.frameNumber=t.frameNumber,this.sampleNumber=t.sampleNumber}}class Dt extends st{constructor(t,e){const i=new Pt(e,!0);super(i,t,i&&tt.get(i).samples)}}class Lt extends at{constructor(t,e){super(t),this.Frame=Dt,e(this.codec)}get codec(){return"flac"}parseFrames(t){return 0===t.header.pageSequenceNumber?(this._headerCache.enable(),{frames:[],remainingData:0}):1===t.header.pageSequenceNumber?{frames:[],remainingData:0}:{frames:t.segments.filter(t=>255===t[0]).map(t=>new Dt(t,Pt.getHeader(t,this._headerCache))),remainingData:0}}}const At={0:["monophonic (mono)","stereo (left, right)"],1:["monophonic (mono)","stereo (left, right)","linear surround (left, center, right)","quadraphonic (front left, front right, rear left, rear right)","5.0 surround (front left, front center, front right, rear left, rear right)","5.1 surround (front left, front center, front right, rear left, rear right, LFE)","6.1 surround (front left, front center, front right, side left, side right, rear center, LFE)","7.1 surround (front left, front center, front right, side left, side right, rear left, rear right, LFE)"]};class Nt extends rt{static getHeader(t,e){const i={};if(t.length<19)return new Nt(i,!1);const a=it.getKey(t.subarray(0,19)),s=e.getHeader(a);if(s)Object.assign(i,s);else{if(79!==t[0]||112!==t[1]||117!==t[2]||115!==t[3]||72!==t[4]||101!==t[5]||97!==t[6]||100!==t[7])return null;if(1!==t[8])return null;const e=new DataView(Uint8Array.of(...t.subarray(0,19)).buffer);if(i.bitDepth=16,i.length=19,i.channels=t[9],i.preSkip=e.getUint16(10,!0),i.inputSampleRate=e.getUint32(12,!0),i.sampleRate=48e3,i.outputGain=e.getInt16(16,!0),i.channelMappingFamily=t[18],!i.channelMappingFamily in At)return null;if(i.channelMode=At[i.channelMappingFamily][i.channels-1],!i.channelMode)return null}if(0!==i.channelMappingFamily){if(i.length+=2+i.channels,t.length<i.length)return new Nt(i,!1);i.streamCount=t[19],i.coupledStreamCount=t[20],i.channelMappingTable=t.subarray(21,i.channels+21)}if(i.data=Uint8Array.of(...t.subarray(0,i.length)),!s){const{length:t,data:s,channelMappingFamily:r,...n}=i;e.setHeader(a,i,n)}return new Nt(i,!0)}constructor(t,e){super(t,e),this.data=t.data,this.channelMappingFamily=t.channelMappingFamily,this.channelMode=t.channelMode,this.coupledStreamCount=t.coupledStreamCount,this.preSkip=t.preSkip,this.outputGain=t.outputGain,this.inputSampleRate=t.inputSampleRate,this.streamCount=t.streamCount,this.channelMappingTable=t.channelMappingTable}}const Ft={0:{mode:"SILK-only",bandwidth:"NB",frameSize:10},8:{mode:"SILK-only",bandwidth:"NB",frameSize:20},16:{mode:"SILK-only",bandwidth:"NB",frameSize:40},24:{mode:"SILK-only",bandwidth:"NB",frameSize:60},32:{mode:"SILK-only",bandwidth:"MB",frameSize:10},40:{mode:"SILK-only",bandwidth:"MB",frameSize:20},48:{mode:"SILK-only",bandwidth:"MB",frameSize:40},56:{mode:"SILK-only",bandwidth:"MB",frameSize:60},64:{mode:"SILK-only",bandwidth:"WB",frameSize:10},72:{mode:"SILK-only",bandwidth:"WB",frameSize:20},80:{mode:"SILK-only",bandwidth:"WB",frameSize:40},88:{mode:"SILK-only",bandwidth:"WB",frameSize:60},96:{mode:"Hybrid",bandwidth:"SWB",frameSize:10},104:{mode:"Hybrid",bandwidth:"SWB",frameSize:20},112:{mode:"Hybrid",bandwidth:"FB",frameSize:10},120:{mode:"Hybrid",bandwidth:"FB",frameSize:20},128:{mode:"CELT-only",bandwidth:"NB",frameSize:2.5},136:{mode:"CELT-only",bandwidth:"NB",frameSize:5},144:{mode:"CELT-only",bandwidth:"NB",frameSize:10},152:{mode:"CELT-only",bandwidth:"NB",frameSize:20},160:{mode:"CELT-only",bandwidth:"WB",frameSize:2.5},168:{mode:"CELT-only",bandwidth:"WB",frameSize:5},176:{mode:"CELT-only",bandwidth:"WB",frameSize:10},184:{mode:"CELT-only",bandwidth:"WB",frameSize:20},192:{mode:"CELT-only",bandwidth:"SWB",frameSize:2.5},200:{mode:"CELT-only",bandwidth:"SWB",frameSize:5},208:{mode:"CELT-only",bandwidth:"SWB",frameSize:10},216:{mode:"CELT-only",bandwidth:"SWB",frameSize:20},224:{mode:"CELT-only",bandwidth:"FB",frameSize:2.5},232:{mode:"CELT-only",bandwidth:"FB",frameSize:5},240:{mode:"CELT-only",bandwidth:"FB",frameSize:10},248:{mode:"CELT-only",bandwidth:"FB",frameSize:20}};class zt extends st{static getPacket(t){const e={config:Ft[248&t[0]],channels:4&t[0]?2:1,code:3&t[0]};switch(e.code){case 0:return e.frameCount=1,e;case 1:case 2:return e.frameCount=2,e;case 3:return e.isVbr=Boolean(128&t[1]),e.hasOpusPadding=Boolean(64&t[1]),e.frameCount=63&t[1],e}}constructor(t,e){let i=new Nt(e,!0);const a=zt.getPacket(t);super(i,t,i&&a.config.frameSize*a.frameCount/1e3*i.sampleRate)}}class Ut extends at{constructor(t,e){super(t),this.Frame=zt,this._identificationHeader=null,this._maxHeaderLength=26,e(this.codec)}get codec(){return"opus"}parseFrames(t){return 0===t.header.pageSequenceNumber?(this._headerCache.enable(),this._identificationHeader=Nt.getHeader(t.data,this._headerCache),{frames:[],remainingData:0}):1===t.header.pageSequenceNumber?{frames:[],remainingData:0}:{frames:t.segments.map(t=>new zt(t,this._identificationHeader)),remainingData:0}}}class Ot extends st{constructor(t,e,i){super(e,t,i)}}const Vt={6:64,7:128,8:256,9:512,10:1024,11:2048,12:4096,13:8192};class Ht extends rt{static getHeader(t,e){const i={length:30};if(t.length<30)return new Ht(i,!1);const a=it.getKey(t.subarray(0,30)),s=e.getHeader(a);if(s)return new Ht(s,!0);if(1!==t[0]||118!==t[1]||111!==t[2]||114!==t[3]||98!==t[4]||105!==t[5]||115!==t[6])return null;i.data=Uint8Array.of(...t.subarray(0,30));const r=new DataView(i.data.buffer);if(i.version=r.getUint32(7,!0),0!==i.version)return null;if(i.channels=t[11],i.sampleRate=r.getUint32(12,!0),i.bitrateMaximum=r.getInt32(16,!0),i.bitrateNominal=r.getInt32(20,!0),i.bitrateMinimum=r.getInt32(24,!0),i.blocksize1=Vt[(240&t[28])>>4],i.blocksize0=Vt[15&t[28]],t[!0])return null;i.bitDepth=32;{const{length:t,data:s,version:r,...n}=i;e.setHeader(a,i,n)}return new Ht(i,!0)}constructor(t,e){super(t,e),this.bitrateMaximum=t.bitrateMaximum,this.bitrateMinimum=t.bitrateMinimum,this.bitrateNominal=t.bitrateNominal,this.blocksize0=t.blocksize0,this.blocksize1=t.blocksize1,this.data=t.data,this.vorbisComments=void 0,this.vorbisSetup=void 0}}class $t extends at{constructor(t,e){super(t),this.Frame=Ot,this._maxHeaderLength=29,e(this.codec),this._identificationHeader=null,this._mode={count:0},this._prevBlockSize=0,this._currBlockSize=0}get codec(){return"vorbis"}parseFrames(t){return 0===t.header.pageSequenceNumber?(this._headerCache.enable(),this._identificationHeader=Ht.getHeader(t.data,this._headerCache),{frames:[],remainingData:0}):1===t.header.pageSequenceNumber?(this._identificationHeader.vorbisComments=t.segments[0],this._identificationHeader.vorbisSetup=t.segments[1],this._mode=this._parseSetupHeader(t.segments[1]),{frames:[],remainingData:0}):{frames:t.segments.map(t=>new Ot(t,this._identificationHeader,this._getSamples(t))),remainingData:0}}_getSamples(t){const e=t[0]>>1,i=this._mode[e&this._mode.mask];i&&(this._prevBlockSize=e&this._mode.prevMask?this._identificationHeader.blocksize1:this._identificationHeader.blocksize0),this._currBlockSize=i?this._identificationHeader.blocksize1:this._identificationHeader.blocksize0;const a=this._prevBlockSize+this._currBlockSize>>2;return this._prevBlockSize=this._currBlockSize,a}_parseSetupHeader(t){const e=new J(t);let i,a={count:0};for(;1!=(1&e.read(1)););for(;a.count<64&&e.position>0;){const t=X(e.read(8));if(t in a)throw Y("received duplicate mode mapping, failed to parse vorbis modes"),new Error("Failed to read Vorbis stream");let s=0;for(;0===e.read(8)&&s++<3;);if(4!==s){if(1+((126&X(i))>>1)!==a.count)throw Y("mode count did not match actual modes, failed to parse vorbis modes"),new Error("Failed to read Vorbis stream");break}i=e.read(7),a[t]=1&i,e.position+=6,a.count++}return a.mask=(1<<Math.log2(a.count))-1,a.prevMask=1+(1|a.mask),a}}class jt extends at{constructor(t,e){super(),this._onCodecUpdate=t,this._onCodec=e,this.Frame=kt,this._maxHeaderLength=283,this._codec=null}get codec(){return this._codec||""}_matchBytes(t,e){return String.fromCharCode(...e).match(t)}getCodec({data:t}){return this._matchBytes(/\x7fFLAC/,t.subarray(0,5))?(this._parser=new Lt(this._onCodecUpdate,this._onCodec),"flac"):this._matchBytes(/OpusHead/,t.subarray(0,8))?(this._parser=new Ut(this._onCodecUpdate,this._onCodec),"opus"):this._matchBytes(/\x01vorbis/,t.subarray(0,7))?(this._parser=new $t(this._onCodecUpdate,this._onCodec),"vorbis"):void 0}parseFrames(t){const e=this.fixedLengthFrame(t);return e.frames.length&&(this._codec||(this._codec=this.getCodec(e.frames[0]),this._codec))?{frames:e.frames.flatMap(t=>this._parser.parseFrames(t).frames),remainingData:e.remainingData}:{frames:[],remainingData:e.remainingData}}}const qt=()=>{};var Gt=class{constructor(t,{onCodecUpdate:e,onCodec:i}={}){if(this._inputMimeType=t,this._onCodecUpdate=e||qt,this._onCodec=i||qt,this._inputMimeType.match(/aac/))this._codecParser=new xt(this._onCodecUpdate,this._onCodec);else if(this._inputMimeType.match(/mpeg/))this._codecParser=new pt(this._onCodecUpdate,this._onCodec);else{if(!this._inputMimeType.match(/ogg/))throw new Error("Unsupported Codec "+t);this._codecParser=new jt(this._onCodecUpdate,this._onCodec)}this._frameNumber=0,this._totalBytesOut=0,this._totalSamples=0,this._frames=[],this._codecData=new Uint8Array(0),this._generator=this._generator(),this._generator.next()}get codec(){return this._codecParser.codec}*iterator(t){for(let e=this._generator.next(t);e.value;e=this._generator.next())yield e.value}*_generator(){let t=[];for(;;)yield*this._sendReceiveData(t),t=this._parseFrames()}*_sendReceiveData(t){for(const e of t)yield e;let e;do{e=yield}while(!e);this._codecData=((...t)=>{const e=new Uint8Array(t.reduce((t,e)=>t+e.length,0));return t.reduce((t,i)=>(e.set(i,t),t+i.length),0),e})(this._codecData,e)}_parseFrames(){const{frames:t,remainingData:e}=this._codecParser.parseFrames(this._codecData);return this._codecData=this._codecData.subarray(e),t.map(t=>(t.frameNumber=this._frameNumber++,t.totalBytesOut=this._totalBytesOut,t.totalSamples=this._totalSamples,t.totalDuration=this._totalSamples/t.header.sampleRate*1e3,this._totalBytesOut+=t.data.length,this._totalSamples+=t.samples,t))}};class Wt{constructor({name:t,contents:e=[],children:i=[]}){this._name=t,this._contents=e,this._children=i}static stringToByteArray(t){return[...t].map(t=>t.charCodeAt(0))}static getFloat64(t){const e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t),e}static getUint64(t){const e=new Uint8Array(8);return new DataView(e.buffer).setBigUint64(0,BigInt(t)),e}static getUint32(t){const e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t),e}static getUint16(t){const e=new Uint8Array(2);return new DataView(e.buffer).setUint16(0,t),e}static getInt16(t){const e=new Uint8Array(2);return new DataView(e.buffer).setInt16(0,t),e}static*flatten(t){for(const e of t)Array.isArray(e)?yield*Wt.flatten(e):yield e}get contents(){const t=new Uint8Array(this.length),e=this._buildContents();let i=0;for(const a of Wt.flatten(e))"object"!=typeof a?(t[i]=a,i++):(t.set(a,i),i+=a.length);return t}get length(){return this._buildLength()}_buildContents(){return[this._contents,...this._children.map(t=>t._buildContents())]}_buildLength(){let t;return t=Array.isArray(this._contents)?this._contents.reduce((t,e)=>t+(void 0===e.length?1:e.length),0):void 0===this._contents.length?1:this._contents.length,t+this._children.reduce((t,e)=>t+e.length,0)}addChild(t){this._children.push(t)}}class Yt extends Wt{constructor(t,{contents:e,children:i}={}){super({name:t,contents:e,children:i})}_buildContents(){return[...this._lengthBytes,...Wt.stringToByteArray(this._name),...super._buildContents()]}_buildLength(){return this._length||(this._length=4+this._name.length+super._buildLength(),this._lengthBytes=Wt.getUint32(this._length)),this._length}}class Kt extends Wt{constructor(t,{contents:e,tags:i}={}){super({name:t,contents:e,children:i})}static getLength(t){const e=Wt.getUint32(t);return e.every((t,e,i)=>0===t&&(i[e]=128,!0)),e}_buildContents(){return[this._name,...this._lengthBytes,...super._buildContents()]}_buildLength(){if(!this._length){const t=super._buildLength();this._lengthBytes=Kt.getLength(t),this._length=1+t+this._lengthBytes.length}return this._length}addTag(t){this.addChild(t)}}class Qt{constructor(t){this._codec=t}getCodecBox(t){switch(this._codec){case"mp3":return this.getMp4a(t,107);case"mp4a.40.2":return this.getMp4a(t,64);case"opus":return this.getOpus(t);case"flac":return this.getFlaC(t)}}getOpus(t){return new Yt("Opus",{contents:[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channels,0,t.bitDepth,0,0,0,0,Yt.getUint16(t.sampleRate),0,0],children:[new Yt("dOps",{contents:[0,t.channels,Yt.getUint16(t.preSkip),Yt.getUint32(t.inputSampleRate),Yt.getInt16(t.outputGain),t.channelMappingFamily,0!==t.channelMappingFamily?[t.streamCount,t.coupledStreamCount,t.channelMappingTable]:[]]})]})}getFlaC(t){return new Yt("fLaC",{contents:[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channels,0,t.bitDepth,0,0,0,0,Yt.getUint16(t.sampleRate),0,0],children:[new Yt("dfLa",{contents:[0,0,0,0,128,0,0,34,Yt.getUint16(t.blockSize),Yt.getUint16(t.blockSize),0,0,0,0,0,0,Yt.getUint32(t.sampleRate<<12|t.channels<<8|t.bitDepth-1<<4),0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]})]})}getMp4a(t,e){const i=new Kt(4,{contents:[e,21,0,0,0,0,0,0,0,0,0,0,0]});return 64===e&&i.addTag(new Kt(5,{contents:t.audioSpecificConfig})),new Yt("mp4a",{contents:[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channels,0,16,0,0,0,0,Yt.getUint16(t.sampleRate),0,0],children:[new Yt("esds",{contents:[0,0,0,0],children:[new Kt(3,{contents:[0,1,0],tags:[i,new Kt(6,{contents:2})]})]})]})}getInitializationSegment({header:t,samples:e}){return new Wt({children:[new Yt("ftyp",{contents:[Yt.stringToByteArray("iso5"),0,0,2,0,Yt.stringToByteArray("iso6mp41")]}),new Yt("moov",{children:[new Yt("mvhd",{contents:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2]}),new Yt("trak",{children:[new Yt("tkhd",{contents:[0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0]}),new Yt("mdia",{children:[new Yt("mdhd",{contents:[0,0,0,0,0,0,0,0,0,0,0,0,Yt.getUint32(t.sampleRate),0,0,0,0,85,196,0,0]}),new Yt("hdlr",{contents:[0,0,0,0,Yt.stringToByteArray("mhlr"),Yt.stringToByteArray("soun"),0,0,0,0,0,0,0,0,0,0,0,0,0]}),new Yt("minf",{children:[new Yt("stbl",{children:[new Yt("stsd",{contents:[0,0,0,0,0,0,0,1],children:[this.getCodecBox(t)]}),new Yt("stts",{contents:[0,0,0,0,0,0,0,0]}),new Yt("stsc",{contents:[0,0,0,0,0,0,0,0]}),new Yt("stsz",{contents:[0,0,0,0,0,0,0,0,0,0,0,0]}),new Yt("stco",{contents:[0,0,0,0,0,0,0,0]})]})]})]})]}),new Yt("mvex",{children:[new Yt("trex",{contents:[0,0,0,0,0,0,0,1,0,0,0,1,Yt.getUint32(e),0,0,0,0,0,0,0,0]})]})]})]}).contents}getMediaSegment(t){return new Wt({children:[new Yt("moof",{children:[new Yt("mfhd",{contents:[0,0,0,0,0,0,0,0]}),new Yt("traf",{children:[new Yt("tfhd",{contents:[0,2,0,0,0,0,0,1]}),new Yt("tfdt",{contents:[0,0,0,0,0,0,0,0]}),new Yt("trun",{contents:[0,0,2,1,Yt.getUint32(t.length),Yt.getUint32(92+4*t.length),...t.map(({data:t})=>Yt.getUint32(t.length))]})]})]}),new Yt("mdat",{contents:t.map(({data:t})=>t)})]}).contents}}const Xt=(...t)=>t.flatMap(t=>{const e=[];for(let i=t.length;i>=0;i-=255)e.push(i>=255?255:i);return e});class Jt extends Wt{constructor(t,{contents:e,children:i,isUnknownLength:a=!1}={}){super({name:t,contents:e,children:i}),this._isUnknownLength=a}static getUintVariable(t){let e;if(t<127)e=[128|t];else if(t<16383)e=Wt.getUint16(t),e[0]|=64;else if(t<2097151)e=Wt.getUint32(t).subarray(1),e[0]|=32;else if(t<268435455)e=Wt.getUint32(t),e[0]|=16;else if(t<34359738367)e=Wt.getUint64(t).subarray(3),e[0]|=8;else if(t<4398046511103)e=Wt.getUint64(t).subarray(2),e[0]|=4;else if(t<562949953421311)e=Wt.getUint64(t).subarray(1),e[0]|=2;else if(t<72057594037927940)e=Wt.getUint64(t),e[0]|=1;else if("number"!=typeof t||isNaN(t))throw((...t)=>{console.error("mse-audio-wrapper",t.reduce((t,e)=>t+"\n  "+e,""))})("EBML Variable integer must be a number, instead received "+t),new Error("mse-audio-wrapper: Unable to encode WEBM");return e}_buildContents(){return[...this._name,...this._lengthBytes,...super._buildContents()]}_buildLength(){return this._length||(this._contentLength=super._buildLength(),this._lengthBytes=this._isUnknownLength?[1,255,255,255,255,255,255,255]:Jt.getUintVariable(this._contentLength),this._length=this._name.length+this._lengthBytes.length+this._contentLength),this._length}}const Zt=[225],te=[98,100],ee=[159],ie=[31,67,182,117],ae=[86,170],se=[134],re=[99,162],ne=[66,130],oe=[66,133],le=[66,135],ce=[26,69,223,163],he=[66,242],de=[66,243],ue=[66,247],me=[66,134],ge=[156],pe=[21,73,169,102],_e=[77,128],fe=[181],ye=[86,187],be=[24,83,128,103],ve=[163],Se=[231],we=[42,215,177],Me=[174],xe=[215],Be=[22,84,174,107],ke=[131],Ce=[115,197],Ee=[87,65];class Te{constructor(t){switch(t){case"opus":this._codecId="A_OPUS",this._getCodecSpecificTrack=t=>[new Jt(ae,{contents:Jt.getUint32(Math.round(t.preSkip*this._timestampScale))}),new Jt(ye,{contents:Jt.getUint32(Math.round(3840*this._timestampScale))}),new Jt(re,{contents:t.data})];break;case"vorbis":this._codecId="A_VORBIS",this._getCodecSpecificTrack=t=>[new Jt(re,{contents:[2,Xt(t.data,t.vorbisComments),t.data,t.vorbisComments,t.vorbisSetup]})]}}getInitializationSegment({header:t}){return this._timestampScale=1e9/t.sampleRate,new Wt({children:[new Jt(ce,{children:[new Jt(me,{contents:1}),new Jt(ue,{contents:1}),new Jt(he,{contents:4}),new Jt(de,{contents:8}),new Jt(ne,{contents:Jt.stringToByteArray("webm")}),new Jt(le,{contents:4}),new Jt(oe,{contents:2})]}),new Jt(be,{isUnknownLength:!0,children:[new Jt(pe,{children:[new Jt(we,{contents:Jt.getUint32(Math.floor(this._timestampScale))}),new Jt(_e,{contents:Jt.stringToByteArray("mse-audio-wrapper")}),new Jt(Ee,{contents:Jt.stringToByteArray("mse-audio-wrapper")})]}),new Jt(Be,{children:[new Jt(Me,{children:[new Jt(xe,{contents:1}),new Jt(Ce,{contents:1}),new Jt(ge,{contents:0}),new Jt(se,{contents:Jt.stringToByteArray(this._codecId)}),new Jt(ke,{contents:2}),new Jt(Zt,{children:[new Jt(ee,{contents:t.channels}),new Jt(fe,{contents:Jt.getFloat64(t.sampleRate)}),new Jt(te,{contents:t.bitDepth})]}),...this._getCodecSpecificTrack(t)]})]})]})]}).contents}getMediaSegment(t){const e=t[0].totalSamples;return new Jt(ie,{children:[new Jt(Se,{contents:Jt.getUintVariable(e)}),...t.map(({data:t,totalSamples:i})=>new Jt(ve,{contents:[129,Jt.getInt16(i-e),128,t]}))]}).contents}}const Ie=()=>{};var Re=class{constructor(t,e={}){this._inputMimeType=t,this.PREFERRED_CONTAINER=e.preferredContainer||"webm",this.MIN_FRAMES=e.minFramesPerSegment||4,this.MAX_FRAMES=e.maxFramesPerSegment||50,this.MIN_FRAMES_LENGTH=e.minBytesPerSegment||1022,this.MAX_SAMPLES_PER_SEGMENT=1/0,this._onMimeType=e.onMimeType||Ie,this._frames=[],this._codecParser=new Gt(t,{onCodec:t=>{this._container=this._getContainer(t),this._onMimeType(this._mimeType)},onCodecUpdate:e.onCodecUpdate})}get mimeType(){return this._mimeType}get inputMimeType(){return this._inputMimeType}*iterator(t){if(this._frames.push(...this._codecParser.iterator(t)),this._frames.length){const t=this._groupFrames();if(t.length){this._sentInitialSegment||(this._sentInitialSegment=!0,yield this._container.getInitializationSegment(t[0][0]));for(const e of t)yield this._container.getMediaSegment(e)}}}_groupFrames(){const t=[[]];let e=t[0],i=0;for(const a of this._frames)(e.length===this.MAX_FRAMES||i>=this.MAX_SAMPLES_PER_SEGMENT)&&(i=0,t.push(e=[])),e.push(a),i+=a.samples;return this._frames=e.length<this.MIN_FRAMES||e.reduce((t,e)=>t+e.data.length,0)<this.MIN_FRAMES_LENGTH?t.pop():[],t}_getContainer(t){switch(t){case"mpeg":return this._mimeType='audio/mp4;codecs="mp3"',new Qt("mp3");case"aac":return this._mimeType='audio/mp4;codecs="mp4a.40.2"',new Qt("mp4a.40.2");case"flac":return this._mimeType='audio/mp4;codecs="flac"',new Qt("flac");case"vorbis":return this._mimeType='audio/webm;codecs="vorbis"',this.MAX_SAMPLES_PER_SEGMENT=32767,new Te("vorbis");case"opus":return"webm"===this.PREFERRED_CONTAINER?(this._mimeType='audio/webm;codecs="opus"',this.MAX_SAMPLES_PER_SEGMENT=32767,new Te("opus")):(this._mimeType='audio/mp4;codecs="opus"',new Qt("opus"))}}};class Pe extends W{constructor(t){super(t),this._createMediaSource()}static isSupported(){try{new MediaSource}catch{return!1}return!0}static canPlayType(t){const e={mpeg:['audio/mp4;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.2"'],aacp:['audio/mp4;codecs="mp4a.40.2"'],ogg:{flac:['audio/mp4;codecs="flac"'],opus:['audio/mp4;codecs="opus"','audio/webm;codecs="opus"'],vorbis:['audio/webm;codecs="vorbis"']}};if(!Pe.isSupported())return"";if(MediaSource.isTypeSupported(t))return"probably";const i=t.match(/^(?:application\/|audio\/|)(?<mime>[a-zA-Z]+)(?:$|;[ ]*codecs=(?:\'|\")(?<codecs>[a-zA-Z,]+)(?:\'|\"))/);if(i){const{mime:t,codecs:a}=i.groups;if(e[t])return(Array.isArray(e[t])?e[t]:a?a.split(",").flatMap(i=>e[t][i]):Object.values(e[t]).flat()).reduce((t,e)=>MediaSource.isTypeSupported(e)?""===t?"maybe":"probably":t?"maybe":"",null)}return""}async reset(){await this._createMediaSource()}get metadataTimestamp(){return this._mediaSource&&this._mediaSource.sourceBuffers.length&&Math.max(this._mediaSource.sourceBuffers[0].timestampOffset,this._mediaSource.sourceBuffers[0].buffered.length?this._mediaSource.sourceBuffers[0].buffered.end(0):0)||0}getOnStream(t){const e=this._getMimeType(t.headers.get("content-type")).then(t=>this._createSourceBuffer(t)),i=async({stream:t})=>{this._icecast[D](m,t),await e,await this._appendSourceBuffer(t)};return this._mseAudioWrapper?async({stream:t})=>{for await(const e of this._mseAudioWrapper.iterator(t))await i({stream:e})}:i}async _getMimeType(t){if(MediaSource.isTypeSupported(t))return t;{const e=await new Promise(e=>{this._mseAudioWrapper=new Re(t,{onCodecUpdate:(...t)=>this._icecast[D](f,...t),onMimeType:e})});if(!MediaSource.isTypeSupported(e)){this._icecast[D](w,`Media Source Extensions API in your browser does not support ${t} or ${e}`,"See: https://caniuse.com/mediasource and https://developer.mozilla.org/en-US/docs/Web/API/Media_Source_Extensions_API");const i=new Error("Unsupported Media Source Codec "+e);throw i.name="CodecError",i}return e}}async _createSourceBuffer(t){await this._mediaSourcePromise,this._sourceBufferRemoved=0,this._mediaSource.addSourceBuffer(t).mode="sequence"}async _createMediaSource(){return this._mediaSource=new MediaSource,this._audioElement.src=URL.createObjectURL(this._mediaSource),this._mediaSourcePromise=new Promise(t=>{this._mediaSource.addEventListener("sourceopen",t,{once:!0})}),this._mediaSourcePromise}async _waitForSourceBuffer(){return new Promise(t=>{this._mediaSource.sourceBuffers[0].addEventListener("updateend",t,{once:!0})})}async _appendSourceBuffer(t){this._icecast.state!==o&&(this._mediaSource.sourceBuffers[0].appendBuffer(t),await this._waitForSourceBuffer(),this._audioElement.currentTime>10&&this._sourceBufferRemoved+1e4<Date.now()&&(this._sourceBufferRemoved=Date.now(),this._mediaSource.sourceBuffers[0].remove(0,this._audioElement.currentTime-10),await this._waitForSourceBuffer()))}}class De extends W{constructor(t){super(t),this._frame=null,this._audioLoaded=0,this._offset=0,this._audioElement.crossOrigin="anonymous",this._audioElement.preload="none",this._audioElement.src=this._endpoint}static canPlayType(t){return(new Audio).canPlayType(t)}async reset(){this._icecast.state!==n&&(this._frame=null,this._audioLoaded=0,this._offset=0,this._audioElement.removeAttribute("src"),this._audioElement.load(),this._audioElement.src=this._endpoint)}async play(){const t=new Promise((t,e)=>{this._icecast.addEventListener(o,t,{once:!0}),this._audioElement.addEventListener("playing",t,{once:!0}),this._audioElement.addEventListener("error",e,{once:!0})});return this._audioElement.src=this._endpoint,this._audioElement.load(),this._metadataTypes.length?t.then(async()=>{const t=performance.now(),e=await super.play();return this._offset=performance.now()-t,e}):new Promise((t,e)=>{const i=()=>e(new DOMException("Aborted","AbortError")),a=s.get(this._icecast)[U];a.aborted?i():a.signal.addEventListener("abort",i,{once:!0})})}get metadataTimestamp(){return this._frame?(this._frame.totalDuration+this._offset)/1e3:0}getOnStream(t){return this._codecParser=new Gt(t.headers.get("content-type"),{onCodecUpdate:(...t)=>this._icecast[D](f,...t)}),({stream:t})=>{this._icecast[D](m,t);for(const e of this._codecParser.iterator(t))this._frame=e}}}let Le;try{new EventTarget,Le=EventTarget}catch{Le=G}const Ae=Symbol(),Ne=Symbol(),Fe=Symbol(),ze=Symbol(),Ue=Symbol(),Oe=Symbol(),Ve=Symbol(),He=Symbol(),$e=Symbol(),je=Symbol(),qe=Symbol(),Ge=Symbol();class We extends Le{constructor(t,e={}){super(),s.set(this,{[M]:t,[B]:e.audioElement||new Audio,[k]:e.icyMetaInt,[C]:e.icyDetectionTimeout,[x]:e.metadataTypes||["icy"],[F]:(e.metadataTypes||["icy"]).includes("icy"),[E]:e.enableLogging||!1,[T]:(e.retryDelayRate||.1)+1,[I]:1e3*(e.retryDelayMin||.5),[R]:1e3*(e.retryDelayMax||2),[P]:1e3*(e.retryTimeout||30),[Fe]:{[h]:e.onPlay||a,[d]:e.onLoad||a,[u]:e.onStreamStart||a,[m]:e.onStream||a,[g]:e.onStreamEnd||a,[p]:e.onMetadata||a,[_]:e.onMetadataEnqueue||a,[f]:e.onCodecUpdate||a,[y]:e.onStop||a,[b]:e.onRetry||a,[v]:e.onRetryTimeout||a,[S]:(...t)=>{s.get(this)[E]&&console.warn("icecast-metadata-js",t.reduce((t,e)=>t+"\n  "+e,"")),e.onWarn&&e.onWarn(...t)},[w]:(...t)=>{s.get(this)[E]&&console.error("icecast-metadata-js",t.reduce((t,e)=>t+"\n  "+e,"")),e.onError&&e.onError(...t)}},[z]:new V.a({onMetadataUpdate:(...t)=>this[D](p,...t),onMetadataEnqueue:(...t)=>this[D](_,...t)}),[je]:()=>{clearTimeout(s.get(this)[Ge]),this.removeEventListener(u,s.get(this)[je]),s.get(this)[B].removeEventListener("waiting",s.get(this)[$e]),s.get(this)[B].pause(),s.get(this)[z].purgeMetadataQueue(),s.get(this)[Ne]=s.get(this)[Ae].reset()},[Oe]:()=>{this.play()},[Ue]:()=>{this.stop()},[Ve]:()=>{this.state!==r&&this.state!==c||(s.get(this)[B].play(),this[ze]=n,this[D](h))},[He]:t=>{this[D](w,"The audio element encountered an error",{1:"MEDIA_ERR_ABORTED The fetching of the associated resource was aborted by the user's request.",2:"MEDIA_ERR_NETWORK Some kind of network error occurred which prevented the media from being successfully fetched, despite having previously been available.",3:"MEDIA_ERR_DECODE Despite having previously been determined to be usable, an error occurred while trying to decode the media resource, resulting in an error.",4:"MEDIA_ERR_SRC_NOT_SUPPORTED The associated resource or media provider object (such as a MediaStream) has been found to be unsuitable.",5:"MEDIA_ERR_ENCRYPTED"}[t.target.error.code]||"Code: "+t.target.error.code,"Message: "+t.target.error.message),this.state!==c?this.stop():s.get(this)[je]()}}),this[A](),this[ze]=l,Pe.isSupported()?s.get(this)[Ae]=new Pe(this):(s.get(this)[Ae]=new De(this),this[D](S,"Media Source Extensions API in your browser is not supported. Using two requests, one for audio, and another for metadata.","See: https://caniuse.com/mediasource and https://developer.mozilla.org/en-US/docs/Web/API/Media_Source_Extensions_API"))}static canPlayType(t){return{mediasource:Pe.canPlayType(t),html5:De.canPlayType(t)}}get audioElement(){return s.get(this)[B]}get icyMetaInt(){return s.get(this)[Ae].icyMetaInt}get metadataQueue(){return s.get(this)[z].metadataQueue}get state(){return s.get(this)[ze]}set[ze](t){this.dispatchEvent(new CustomEvent(t)),s.get(this)[ze]=t}[A](){const t=s.get(this)[B];t.addEventListener("pause",s.get(this)[Ue]),t.addEventListener("play",s.get(this)[Oe]),t.addEventListener("canplay",s.get(this)[Ve]),t.addEventListener("error",s.get(this)[He])}detachAudioElement(){const t=s.get(this)[B];t.removeEventListener("pause",s.get(this)[Ue]),t.removeEventListener("play",s.get(this)[Oe]),t.removeEventListener("canplay",s.get(this)[Ve]),t.removeEventListener("error",s.get(this)[He])}async play(){if(this.state===l){let t;s.get(this)[U]=new AbortController,this[ze]=r,this[D](d);const e=()=>s.get(this)[Ae].play().catch(async i=>{if("AbortError"!==i.name){if(await this[N](i))return this[D](b),e();s.get(this)[U].abort(),s.get(this)[ze]!==o&&s.get(this)[ze]!==l&&(this[D](w,i),t=i)}});e().finally(()=>{s.get(this)[je](),t&&!t.message.match(/network|fetch|offline/)&&this[L](),this[D](y),this[ze]=l}),await new Promise(t=>{this.addEventListener(h,t,{once:!0})})}}async stop(){this.state!==l&&this.state!==o&&(this[ze]=o,s.get(this)[U].abort(),await new Promise(t=>{this.addEventListener(y,t,{once:!0})}))}async[N](t){if(0===s.get(this)[P])return!1;if(s.get(this)[ze]===c)return await new Promise(t=>{this.addEventListener(o,t,{once:!0});const e=Math.min(s.get(this)[I]*s.get(this)[T]**s.get(this)[qe]++,s.get(this)[R]);setTimeout(()=>{this.removeEventListener(o,t),t()},e+.3*e*Math.random())}),s.get(this)[ze]===c;if(s.get(this)[ze]!==o&&s.get(this)[ze]!==l&&(t.message.match(/network|fetch|offline|Error in body stream/i)||"HTTP Response Error"===t.name)){this[D](w,t),this[ze]=c,this.addEventListener(u,s.get(this)[je],{once:!0}),s.get(this)[F]&&this[D](S,"This stream was requested with ICY metadata.",'If there is a CORS preflight failure, try removing "icy" from the metadataTypes option.',"See https://github.com/eshaz/icecast-metadata-js#cors for more details.");const e=new Promise(t=>{s.get(this)[$e]=t,s.get(this)[B].addEventListener("waiting",s.get(this)[$e],{once:!0})});return s.get(this)[Ge]=setTimeout(()=>{e.then(()=>{s.get(this)[ze]===c&&(this[D](v),this.stop())})},s.get(this)[P]),s.get(this)[qe]=0,!0}return!1}[D](t,...e){this.dispatchEvent(new CustomEvent(t,{detail:e})),s.get(this)[Fe][t](...e)}[L](){this[D](w,"Falling back to HTML5 audio by using two requests: one for audio, and another for metadata.","See the console for details on the error."),s.get(this)[Ae]=new De(this),s.get(this)[Ne].then(()=>this.play())}}},267:function(t,e,i){"use strict";i.d(e,"a",(function(){return L}));i(237),i(147);var a=i(240),s=i.n(a);const r=()=>{},n=new WeakMap,o=Symbol(),l=Symbol(),c=Symbol(),h=Symbol(),d=Symbol(),u=Symbol(),m=Symbol(),g=Symbol(),p=Symbol(),_=Symbol(),f=Symbol(),y=Symbol(),b=Symbol(),v=Symbol(),S=Symbol(),w=Symbol(),M=Symbol(),x=Symbol(),B=Symbol(),k=Symbol(),C=Symbol(),E=Symbol(),T=Symbol(),I=Symbol(),R=Symbol(),P=Symbol(),D=Symbol();class L{constructor(t,e={}){const i=t.split("/").slice(0,-1).join("/");n.set(this,{[M]:t,[d]:e.icestatsEndpoint||i+"/status-json.xsl",[g]:e.statsEndpoint||i+"/stats",[f]:e.nextsongsEndpoint||i+"/nextsongs",[v]:e.sevenhtmlEndpoint||i+"/7.html",[k]:e.sources||[],[C]:1e3*(e.interval||30),[E]:e.onStats||r,[T]:e.onStatsFetch||r,[x]:e.icyMetaInt,[B]:e.icyDetectionTimeout,[o]:new AbortController,[c]:new AbortController,[u]:new AbortController,[p]:new AbortController,[y]:new AbortController,[S]:new AbortController,[I]:"stopped"})}static xml2Json(t){const e=t=>{if(!t.children.length)return Number.isNaN(Number(t.innerHTML))?t.innerHTML:Number(t.innerHTML);const i={};for(const a of t.children)a.nodeName in i?Array.isArray(i[a.nodeName])?i[a.nodeName].push(e(a)):i[a.nodeName]=[i[a.nodeName],e(a)]:i[a.nodeName]=e(a);return i};return e((t=>(new DOMParser).parseFromString(t,"application/xml"))(t))}get state(){return n.get(this)[I]}get icestatsEndpoint(){return n.get(this)[d]}get statsEndpoint(){return n.get(this)[g]}get nextsongsEndpoint(){return n.get(this)[f]}get sevenhtmlEndpoint(){return n.get(this)[v]}start(){"stopped"===n.get(this)[I]&&(n.get(this)[I]="running",this.fetch().then(n.get(this)[E]),n.get(this)[R]=setInterval(()=>{this.fetch().then(n.get(this)[E])},n.get(this)[C]))}stop(){"stopped"!==n.get(this)[I]&&(n.get(this)[I]="stopped",clearInterval(n.get(this)[R]),n.get(this)[o].abort(),n.get(this)[c].abort(),n.get(this)[u].abort(),n.get(this)[p].abort(),n.get(this)[S].abort())}async fetch(){if("fetching"!==n.get(this)[I]){const t=n.get(this)[I];n.get(this)[I]="fetching",n.get(this)[T](n.get(this)[k]);const e=[];n.get(this)[k].includes("icestats")&&e.push(this.getIcestats()),n.get(this)[k].includes("sevenhtml")&&e.push(this.getSevenhtml()),n.get(this)[k].includes("stats")&&e.push(this.getStats()),n.get(this)[k].includes("nextsongs")&&e.push(this.getNextsongs()),n.get(this)[k].includes("icy")&&e.push(this.getIcyMetadata()),n.get(this)[k].includes("ogg")&&e.push(this.getOggMetadata());const i=await Promise.all(e).then(t=>t.reduce((t,e)=>({...t,...e}),{}));return n.get(this)[I]="fetching"!==n.get(this)[I]?n.get(this)[I]:t,i}}async getIcestats(){return this[P]({status:m,endpoint:d,controller:u,mapper:t=>t.json()}).then(t=>({icestats:t&&t.icestats}))}async getSevenhtml(){return this[P]({status:w,endpoint:v,controller:S,mapper:async t=>(await t.text()).match(/(.*?)<\/body>/gi).map(t=>{const e=t.match(/(<body>|,)(?<stats>.*)<\/body>/i).groups.stats.split(",");return 7===e.length?{StreamTitle:e[6],currentListeners:parseInt(e[4]),peakListeners:parseInt(e[2]),maxListeners:parseInt(e[3]),bitrate:parseInt(e[5]),status:parseInt(e[1]),serverListeners:parseInt(e[0])}:{StreamTitle:e[4],currentListeners:parseInt(e[2]),peakListeners:parseInt(e[0]),maxListeners:parseInt(e[1]),bitrate:parseInt(e[3])}})}).then(t=>({sevenhtml:t}))}async getStats(){return this[P]({status:_,endpoint:g,controller:p,mapper:async t=>L.xml2Json(await t.text()).SHOUTCASTSERVER.STREAMSTATS}).then(t=>({stats:t}))}async getNextsongs(){return this[P]({status:b,endpoint:f,controller:y,mapper:async t=>L.xml2Json(await t.text()).SHOUTCASTSERVER.NEXTSONGS}).then(t=>({nextsongs:t}))}async getIcyMetadata(){return this[D]({status:l,endpoint:M,controller:o,metadataType:"icy",headers:{"Icy-MetaData":1}})}async getOggMetadata(){return this[D]({status:h,endpoint:M,controller:c,metadataType:"ogg"})}async[D]({status:t,endpoint:e,controller:i,headers:a,metadataType:r}){return this[P]({status:t,endpoint:e,controller:i,headers:a,mapper:async t=>new Promise(e=>{new s.a(t,{onMetadata:({metadata:t})=>{n.get(this)[i].abort(),e(t)},onMetadataFailed:()=>{n.get(this)[i].abort(),e()},metadataTypes:r,icyMetaInt:n.get(this)[x],icyDetectionTimeout:n.get(this)[B]}).startReading()})}).then(t=>({[r]:t}))}async[P]({status:t,endpoint:e,controller:i,mapper:a,headers:s={}}){if(!n.get(this)[t])return n.get(this)[t]=!0,fetch(n.get(this)[e],{method:"GET",headers:s,signal:n.get(this)[i].signal}).then(t=>{if(!t.ok)throw new Error("HTTP Error "+t.status);return t}).then(a).catch(t=>{"AbortError"!==t.name&&console.warn("Failed to fetch "+n.get(this)[e],t)}).finally(()=>{n.get(this)[t]=!1,n.get(this)[i]=new AbortController})}}},287:function(t,e,i){var a=i(288);"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i(7)(a,s);a.locals&&(t.exports=a.locals)},288:function(t,e,i){(t.exports=i(6)(!1)).push([t.i,'.theme--light.v-slider .v-slider__thumb,.theme--light.v-slider .v-slider__track-background,.theme--light.v-slider .v-slider__track-fill{background:rgba(0,0,0,.26)}.theme--dark.v-slider .v-slider__thumb,.theme--dark.v-slider .v-slider__track-background,.theme--dark.v-slider .v-slider__track-fill{background:hsla(0,0%,100%,.2)}.v-slider{cursor:default;display:flex;align-items:center;position:relative;flex:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-slider input{cursor:default;padding:0;width:100%;display:none}.v-slider__track-container{position:absolute;border-radius:0}.v-slider__thumb-container,.v-slider__track-background,.v-slider__track-fill{position:absolute;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-slider__thumb-container{outline:none;top:50%}.v-slider__thumb-container:hover .v-slider__thumb:before{transform:scale(1)}.v-slider__thumb{width:12px;height:12px;left:-6px;top:50%;transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-slider__thumb,.v-slider__thumb:before{position:absolute;border-radius:50%;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-slider__thumb:before{content:"";color:inherit;width:36px;height:36px;background:currentColor;opacity:.3;left:-12px;top:-12px;transform:scale(.1);pointer-events:none}.v-slider__thumb:after{content:"";width:42px;height:42px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.v-slider__tick,.v-slider__ticks-container{position:absolute}.v-slider__tick{opacity:0;background-color:rgba(0,0,0,.5);transition:.3s cubic-bezier(.25,.8,.5,1);border-radius:0}.v-slider__tick--filled{background-color:hsla(0,0%,100%,.5)}.v-application--is-ltr .v-slider__tick:first-child .v-slider__tick-label{transform:none}.v-application--is-rtl .v-slider__tick:first-child .v-slider__tick-label{transform:translateX(100%)}.v-application--is-ltr .v-slider__tick:last-child .v-slider__tick-label{transform:translateX(-100%)}.v-application--is-rtl .v-slider__tick:last-child .v-slider__tick-label{transform:none}.v-slider__tick-label{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.v-slider__thumb-label-container{top:0}.v-slider__thumb-label,.v-slider__thumb-label-container{position:absolute;left:0;transition:.3s cubic-bezier(.25,.8,.25,1)}.v-slider__thumb-label{display:flex;align-items:center;justify-content:center;font-size:.75rem;color:#fff;width:32px;height:32px;border-radius:50% 50% 0;bottom:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-slider--horizontal{min-height:32px;margin-left:8px;margin-right:8px}.v-slider--horizontal .v-slider__track-container{width:100%;height:2px;left:0;top:50%;transform:translateY(-50%)}.v-slider--horizontal .v-slider__track-background,.v-slider--horizontal .v-slider__track-fill{height:100%}.v-slider--horizontal .v-slider__ticks-container{left:0;height:2px;width:100%}.v-application--is-ltr .v-slider--horizontal .v-slider__tick:first-child .v-slider__tick-label,.v-application--is-rtl .v-slider--horizontal .v-slider__tick:first-child .v-slider__tick-label{transform:translateX(0)}.v-application--is-ltr .v-slider--horizontal .v-slider__tick:last-child .v-slider__tick-label{transform:translateX(-100%)}.v-application--is-rtl .v-slider--horizontal .v-slider__tick:last-child .v-slider__tick-label{transform:translateX(100%)}.v-slider--horizontal .v-slider__tick .v-slider__tick-label{top:8px}.v-application--is-ltr .v-slider--horizontal .v-slider__tick .v-slider__tick-label{transform:translateX(-50%)}.v-application--is-rtl .v-slider--horizontal .v-slider__tick .v-slider__tick-label{transform:translateX(50%)}.v-slider--horizontal .v-slider__thumb-label{transform:translateY(-20%) translateY(-12px) translateX(-50%) rotate(45deg)}.v-slider--horizontal .v-slider__thumb-label>*{transform:rotate(-45deg)}.v-slider--vertical{min-height:150px;margin-top:12px;margin-bottom:12px}.v-slider--vertical .v-slider__track-container{height:100%;width:2px;left:50%;top:0;transform:translateX(-50%)}.v-slider--vertical .v-slider__track-background,.v-slider--vertical .v-slider__track-fill{width:100%}.v-slider--vertical .v-slider__thumb-container{left:50%}.v-slider--vertical .v-slider__ticks-container{top:0;width:2px;height:100%;left:50%;transform:translateX(-50%)}.v-application--is-ltr .v-slider--vertical .v-slider__tick .v-slider__tick-label,.v-application--is-ltr .v-slider--vertical .v-slider__tick:first-child .v-slider__tick-label,.v-application--is-ltr .v-slider--vertical .v-slider__tick:last-child .v-slider__tick-label{transform:translateY(-50%);left:12px}.v-application--is-rtl .v-slider--vertical .v-slider__tick .v-slider__tick-label,.v-application--is-rtl .v-slider--vertical .v-slider__tick:first-child .v-slider__tick-label,.v-application--is-rtl .v-slider--vertical .v-slider__tick:last-child .v-slider__tick-label{transform:translateY(-50%);right:12px}.v-slider--vertical .v-slider__thumb-label>*{transform:rotate(-135deg)}.v-slider__thumb-container--focused .v-slider__thumb:before{transform:scale(1)}.v-slider--active .v-slider__tick{opacity:1}.v-slider__thumb-container--active .v-slider__thumb:before{transform:scale(1.5)!important}.v-slider--disabled{pointer-events:none}.v-slider--disabled .v-slider__thumb{width:8px;height:8px;left:-4px}.v-slider--disabled .v-slider__thumb:before{display:none}.v-slider__ticks-container--always-show .v-slider__tick{opacity:1}.v-input__slider.v-input--is-readonly>.v-input__control{pointer-events:none}.v-application--is-ltr .v-input__slider .v-input__slot .v-label{margin-left:0;margin-right:12px}.v-application--is-ltr .v-input__slider--inverse-label .v-input__slot .v-label,.v-application--is-rtl .v-input__slider .v-input__slot .v-label{margin-right:0;margin-left:12px}.v-application--is-rtl .v-input__slider--inverse-label .v-input__slot .v-label{margin-left:0;margin-right:12px}.v-input__slider--vertical{align-items:center}.v-application--is-ltr .v-input__slider--vertical{flex-direction:column-reverse}.v-application--is-rtl .v-input__slider--vertical{flex-direction:column}.v-input__slider--vertical .v-input__append-outer,.v-input__slider--vertical .v-input__prepend-outer,.v-input__slider--vertical .v-input__slot{margin:0}.v-input__slider--vertical .v-messages{display:none}.v-input--has-state .v-slider__track-background{opacity:.4}',""])},454:function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},455:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},456:function(t,e){t.exports=class{constructor(){this._totalBytesRead=0,this._streamBytesRead=0,this._metadataLengthBytesRead=0,this._metadataBytesRead=0,this._currentBytesRemaining=0,this._currentStreamBytesRemaining=0,this._currentMetadataBytesRemaining=0}get stats(){return{totalBytesRead:this._totalBytesRead,streamBytesRead:this._streamBytesRead,metadataLengthBytesRead:this._metadataLengthBytesRead,metadataBytesRead:this._metadataBytesRead,currentBytesRemaining:this._currentBytesRemaining,currentStreamBytesRemaining:this._currentStreamBytesRemaining,currentMetadataBytesRemaining:this._currentMetadataBytesRemaining}}set currentStreamBytesRemaining(t){this._currentStreamBytesRemaining+=t}set currentMetadataBytesRemaining(t){this._currentMetadataBytesRemaining=t}addBytes(t){this._totalBytesRead+=t,this._currentBytesRemaining-=t}addStreamBytes(t){this._streamBytesRead+=t,this._currentStreamBytesRemaining-=t}addMetadataLengthBytes(t){this._metadataLengthBytesRead+=t}addMetadataBytes(t){this._metadataBytesRead+=t,this._currentMetadataBytesRemaining-=t}addCurrentBytesRemaining(t){this._currentBytesRemaining+=t}}},457:function(t,e,i){const a=i(235),s=i(236);t.exports=class{constructor(t){const{onStream:e,...i}=t;this._oggMetadataParser=new s(t),this._icyMetadataParser=new a(i)}get icyMetaInt(){return this._icyMetadataParser.icyMetaInt}*iterator(t){for(const e of this._icyMetadataParser.iterator(t))e.stream?yield*this._oggMetadataParser.iterator(e.stream):yield e}readAll(t){for(const e of this._icyMetadataParser.iterator(t))e.stream&&this._oggMetadataParser.readAll(e.stream)}async*asyncIterator(t){for await(const e of this._icyMetadataParser.asyncIterator(t))if(e.stream)for await(const t of this._oggMetadataParser.asyncIterator(e.stream))yield t;else yield e}async asyncReadAll(t){for await(const e of this._icyMetadataParser.iterator(t))e.stream&&await this._oggMetadataParser.asyncReadAll(e.stream)}}},458:function(t,e){t.exports=class{constructor(){this._totalBytesRead=0,this._streamBytesRead=0,this._metadataLengthBytesRead=0,this._metadataBytesRead=0,this._currentBytesRemaining=0,this._currentStreamBytesRemaining=0,this._currentMetadataBytesRemaining=0}get stats(){return{totalBytesRead:this._totalBytesRead,streamBytesRead:this._streamBytesRead,metadataLengthBytesRead:this._metadataLengthBytesRead,metadataBytesRead:this._metadataBytesRead,currentBytesRemaining:this._currentBytesRemaining,currentStreamBytesRemaining:this._currentStreamBytesRemaining,currentMetadataBytesRemaining:this._currentMetadataBytesRemaining}}set currentStreamBytesRemaining(t){this._currentStreamBytesRemaining+=t}set currentMetadataBytesRemaining(t){this._currentMetadataBytesRemaining=t}addBytes(t){this._totalBytesRead+=t,this._currentBytesRemaining-=t}addStreamBytes(t){this._streamBytesRead+=t,this._currentStreamBytesRemaining-=t}addMetadataLengthBytes(t){this._metadataLengthBytesRead+=t}addMetadataBytes(t){this._metadataBytesRead+=t,this._currentMetadataBytesRemaining-=t}addCurrentBytesRemaining(t){this._currentBytesRemaining+=t}}},459:function(t,e,i){const a=i(238),s=i(239);t.exports=class{constructor(t){const{onStream:e,...i}=t;this._oggMetadataParser=new s(t),this._icyMetadataParser=new a(i)}get icyMetaInt(){return this._icyMetadataParser.icyMetaInt}*iterator(t){for(const e of this._icyMetadataParser.iterator(t))e.stream?yield*this._oggMetadataParser.iterator(e.stream):yield e}readAll(t){for(const e of this._icyMetadataParser.iterator(t))e.stream&&this._oggMetadataParser.readAll(e.stream)}async*asyncIterator(t){for await(const e of this._icyMetadataParser.asyncIterator(t))if(e.stream)for await(const t of this._oggMetadataParser.asyncIterator(e.stream))yield t;else yield e}async asyncReadAll(t){for await(const e of this._icyMetadataParser.iterator(t))e.stream&&await this._oggMetadataParser.asyncReadAll(e.stream)}}}}]);